var MY_UTILS=function(e){function t(e){try{return e=JSON.parse(e)}catch(t){return e}}var n={$document:e(document),$window:e(window),$body:e("body"),$scrollRoot:e("html, body"),$functionElems:null,$targetElems:null,selectors:{functionElement:"[data-fn]",targetElement:"[data-tg]"},attributes:{target:"data-fn-target",options:"data-fn-options"},classes:{open:"show",animating:"animating",animatingIn:"animating-in",animatingOut:"animating-out"},mediaSize:null,mediaSizes:[{breakpoint:0,label:"xs"},{breakpoint:576,label:"sm"},{breakpoint:768,label:"md"},{breakpoint:992,label:"lg"},{breakpoint:1200,label:"xl"}],anchorOffsetTop:0},a=e(n.selectors.functionElement+", "+n.selectors.targetElement);n.$functionElems=a.filter(n.selectors.functionElement),n.$targetElems=a.filter(n.selectors.targetElement);var o=n.$functionElems.filter('[data-fn="anchor-offset-elem"]');e.fn._getAnchorOffset=function(){return(o.length>0?this.outerHeight():0)+20},n.anchorOffsetTop=o._getAnchorOffset(),n.$window.on("sizeChange",function(){n.anchorOffsetTop=o._getAnchorOffset()}),e.fn.getTransitionDuration=function(){var e=0,t="transition-duration",n=["webkit","ms","moz","o"];if(this.css(t))e=this.css(t);else for(i=0;i<n.length;i++)if(this.css("-"+n[i]+"-"+t)){e=this.css("-"+n[i]+"-"+t);break}return e.indexOf("ms")>-1?parseFloat(e):1e3*parseFloat(e)},e.fn.setRemoveAnimationClass=function(t){t||n.classes.animating;var a=e(this),i=a.getTransitionDuration();if(i>0){a.addClass(t);setTimeout(function(){a.removeClass(t)},i)}},e.fn.elemPositionedInside=function(t){var n=e(this),a=e(t),i=n.offset().left,o=n.offset().top,r=n.width(),s=n.height(),l=a.offset().left,d=a.offset().top,c=a.outerWidth(),f=a.outerHeight();return i>=l&&i+r<=l+c&&o>=d&&o+s<=d+f},e.fn.ariaExpanded=function(n){return void 0!==n?(e(this).attr("aria-expanded",n),n):t(e(this).attr("aria-expanded"))},e.fn.aria=function(n,a){return void 0!==a?(e(this).attr("aria-"+n,a),a):t(e(this).attr("aria-"+n))};return _getmediaSize=function(){var e;if(window.matchMedia)for(i=0;i<n.mediaSizes.length-1;i++){if(window.matchMedia("(max-width: "+(n.mediaSizes[i+1].breakpoint-1)+"px)").matches){e=n.mediaSizes[i].label;break}e=n.mediaSizes[n.mediaSizes.length-1].label}else for(i=0;i<n.mediaSizes.length-1;i++){if(n.$window.width()<n.mediaSizes[i+1].breakpoint){e=n.mediaSizes[i].label;break}e=n.mediaSizes[n.mediaSizes.length-1].label}e!=n.mediaSize&&(n.$body.removeClass("media-"+n.mediaSize),n.$body.addClass("media-"+e),n.mediaSize=e,n.$window.trigger("sizeChange"))},n.$document.ready(function(){_getmediaSize(),n.$window.trigger("sizeChangeReady")}),n.$window.on("resize",function(){_getmediaSize()}),e.fn.getOptionsFromAttr=function(){var t=e(this).attr(n.attributes.options);return void 0!==t&&new Function("return "+t)()},n}(jQuery);!function(){var e=/iPad|iPhone|iPod/.test(navigator.platform)&&!window.MSStream,t=/(android)/i.test(navigator.userAgent);e?document.body.className+=" is-ios":t&&(document.body.className+=" is-android");var n=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var a=e.indexOf("Edge/");return a>0&&parseInt(e.substring(a+5,e.indexOf(".",a)),10)}();if(!1!==n&&n>9)for(document.body.className+=" ie ie"+n,i=n;i<=14;i++)document.body.className+=" ielte"+i;if(e){var a=document.body.children;for(i=0;i<a.length;i++)"DIV"==a[i].tagName&&a[i].setAttribute("onclick","void(0);")}}(),function(e,t){e.fn.animatedAnchors=function(n){var a=e(this);if(n=e.extend({},{scrollToInitialHash:!0,scrollDurationMin:300,scrollDurationMax:800,scrollDurationPer1000:400,offset:function(){return 0},scrollTolerance:1,fixedClass:"fixed"},n),e.fn._animatedScrollTo=function(){$this=e(this);var a=t.$window.scrollTop(),i=$this.offset().top+n.scrollTolerance,o=Math.abs(i-n.offset()-a)*n.scrollDurationPer1000/1e3;o<n.scrollDurationMin?o=n.scrollDurationMin:o>n.scrollDurationMax&&(o=n.scrollDurationMax),t.$scrollRoot.animate({scrollTop:i-n.offset()},o)},n.scrollToInitialHash){var i=e(window.location.hash);window.location.hash&&i.length>0&&(i._animatedScrollTo(),t.$window.on("load",function(){i._animatedScrollTo()}))}a.each(function(){var t=e(this);t.on("click",function(){var n=t.attr("href"),a=e(n);a.length>0&&a._animatedScrollTo()})})}}(jQuery,MY_UTILS),function(e,t){e.fn.checkSlideToggle=function(n){var a={effectIn:"slideDown",effectOut:"slideUp",effectDuration:400,triggerSelector:'input[type="checkbox"]',openedClass:t.classes.open,animatingClass:t.classes.animating,animatingInClass:t.classes.animatingIn,animatingOutClass:t.classes.animatingOut};n=e.extend({},a,n);e(this).each(function(){var t=e(this),a=t.find(n.triggerSelector),i=t.find(e(a.attr("aria-controls")));a.is(":checked")?(t.addClass(n.openedClass),a.ariaExpanded(!0),i.show()):(t.removeClass(n.openedClass),a.ariaExpanded(!1),i.hide()),a.on("change",function(){a.ariaExpanded()?(t.addClass(n.animatingClass).addClass(n.animatingOutClass).removeClass(n.openedClass),a.ariaExpanded(!1),i.stop()[n.effectOut](n.effectDuration,function(){t.removeClass(n.animatingClass).removeClass(n.animatingOutClass)})):(t.addClass(n.animatingClass).addClass(n.animatingInClass),a.ariaExpanded(!0),i.stop()[n.effectIn](n.effectDuration,function(){t.addClass(n.openedClass).removeClass(n.animatingClass).removeClass(n.animatingInClass)}))})})}}(jQuery,MY_UTILS),function(e,t){var n={Vorstand:[{name:"Vorsitzende",count:2},{name:"Schatzmeister*in",count:1},{name:"weitere Mitglieder",count:"variable",countVariable:!0,overall:!0}],Schiedsgericht:[{name:"Richter*innen",count:3},{name:"Ersatzrichter*innen",count:2,overall:!0}],"Kassenprüfer*innen":[{name:"Kassenprüfer*innen",count:2}]},a={Vorstand:[{name:"Vorsitzende",count:2,joint:!0,candidates:[{candidate:{name:"Lina Limone",female:!0,diverse:!1},yes:18,no:2},{candidate:{name:"Manfred Mango",female:!1,diverse:!1},yes:12,no:1},{candidate:{name:"Olivia Orange",female:!0,diverse:!0},yes:12,no:0}]},{name:"Schatzmeister*in",count:1,candidates:[{candidate:{name:"Anna Ananas",female:!0,diverse:!0},yes:12,no:4},{candidate:{name:"Cora Cocos",female:!0,diverse:!1},yes:7,no:1}]},{name:"weitere Mitglieder",count:3,countVariable:!0,overall:!0,joint:!1,candidates:[[{candidate:{name:"Maria Maracuja",female:!0,diverse:!0},yes:12,no:0},{candidate:{name:"Bernard Banane",female:!1,diverse:!1},yes:12,no:1}],[{candidate:{name:"Kira Kirsch-Banane",female:!0,diverse:!1},yes:18,no:2},{candidate:{name:"Alfred Apfel",female:!1,diverse:!0},yes:11,no:3},{candidate:{name:"Anna Ananas",female:!0,diverse:!0},yes:12,no:4},{candidate:{name:"Cora Cocos",female:!0,diverse:!1},yes:7,no:1}],[{candidate:{name:"Kilian Kiwi",female:!1,diverse:!0},yes:7,no:0},{candidate:{name:"Mandy Mandarine",female:!0,diverse:!0},yes:8,no:2},{candidate:{name:"Melly Melone",female:!0,diverse:!1},yes:15,no:3}]]}]},i=a?e.extend({},n,a):e.extend({},n),o='[data-fn="election-step-form-',r='[data-fn="election-step-select-',s='[data-tg="election-item-template-',l='[data-tg="election-item-append-',d="data-g-tg",c="election-item",f="data-item-id",u="data-subitem-id",m='[data-tg="election-subitem-template-',g='[data-g-tg="election-subitem-append-',h="data-g-tg",p="election-subitem",v=(u="data-subitem-id","data-confirm-delete"),_=[],b=[],C="name";_[0]={check:{selector:'[id^="election-check-"]',value:"true",name:"election_"}},b[0]={count:{selector:'[id^="election-count-"]',value:"",name:"count_"},joint:{selector:'[id^="election-joint-"]',value:"true",name:"joint_",saveAs:"joint"}},b[1]={name:{selector:'[id^="name-"]',value:"",name:"name_",confirmSubitemDelete:!0,saveAs:"name"},female:{selector:'[id^="female-check-"]',value:"true",name:"female_",saveAs:"female"},diverse:{selector:'[id^="diverse-check-"]',value:"true",name:"diverse_",saveAs:"diverse"}},b[2]={yes:{selector:'[id^="votes-yes-"]',value:"",name:"yes_",saveAs:"yes"},no:{selector:'[id^="votes-no-"]',value:"",name:"no_",saveAs:"no"}};var y='<option value="-1" selected>Alle</option>';e.fn._replaceTemplatePlaceholders=function(t){for(var n=e(this),a=0;a<t.length;a++){var i="{{ "+t[a][0]+" }}",o=new RegExp(i,"g");n.html(n.html().replace(o,t[a][1]))}return n},e.fn._addSublistItems=function(n,a,i,o,r){var s=n||1,l=void 0!==o&&r?r[o]:r,d=e(this),c=t.$targetElems.filter(m+1+'"]'),_=d.find(g+1+'"]'),y=d.find("["+u+"]").last(),S=0;y.length>0&&(S=parseInt(y.attr(u))+1);for(var w=0;w<s;w++){var $=S+w,E=c.clone();E._replaceTemplatePlaceholders([["index",$]]).removeAttr("style data-tg").attr(h,p).attr(u,$).show().find('[data-g-fn="election-subitem-remove"]').on("click",function(t){t.preventDefault();var n=e(this).closest("["+h+'="'+p+'"]'),a=n.find("input["+v+"]");if(a.length>0){var i=!1;a.each(function(){""!=(k=e(this)).val()&&(i=!0,k.addClass("is-invalid").on("focus",function(){e(this).removeClass("is-invalid")}))}),i||n.remove()}else n.remove()});for(var x in b[1]){var k=E.find(b[1][x].selector),T=d.attr(f);k.length>0&&(k.attr(C,b[1][x].name+T+"_"+$).attr("value",b[1][x].value),b[1][x].confirmSubitemDelete&&k.attr(v,""))}l&&l[w]&&l[w].candidate&&(l[w].candidate.name&&""!=l[w].candidate.name&&E.find('input[name^="name"]').val(l[w].candidate.name),l[w].candidate.female&&E.find('input[name^="female"]').attr("checked",""),l[w].candidate.diverse&&E.find('input[name^="diverse"]').attr("checked","")),E.appendTo(_)}},e.fn._validateNumberInput=function(){var t=e(this),n=t.find('[data-g-fn="validate"]');if(n.addClass("TEST"),n.length>0){var a=t.find(n.attr("data-g-tg"));n.on("change keyup",function(){var t=e(this),n=parseInt(t.attr("min")),i=parseInt(t.attr("max")),o=t.val();console.log("min: "+n+" – max: "+i),"NaN"==typeof n&&"NaN"==typeof man||""==o||("NaN"!=typeof n&&o<n?t.val(n):"NaN"!=typeof man&&o>i&&t.val(i)),a.length>0&&(o>1?a.show():a.hide())})}},e.fn._getFormValues=function(t){var n=e(this),a={},i=t||"name";return n.find("input["+i+"], select["+i+"], textarea["+i+"]").each(function(t,n){var o=e(n);"radio"==o.attr("type")?o.is(":checked")&&(a[o.attr(i)]=o.val()):"checkbox"==o.attr("type")?a[o.attr(i)]=o.is(":checked")?o.val():null:a[o.attr(i)]=o.val()}),a},_filterMatchingIndexes=function(e,t){for(var n=[],a=0;a<e.length;a++)0===e[a].indexOf(t)&&n.push(e[a]);return n},_calculateElectionResult=function(e){return console.log("_calculateElectionResult – input: "+JSON.stringify(e,null,2)),"string"==typeof e.current?[{candidate:{name:"Kira Kirsch-Banane",female:!0,diverse:!1}},{candidate:{name:"Alfred Apfel",female:!1,diverse:!0}}]:{candidate:{name:"Kira Kirsch-Banane",female:!0,diverse:!1}}},_getElectionResult=function(){for(var e in i){for(var t={structure:[],current:"",previous:[],candidates:[]},n=["name","count","joint","overall"],a=0;a<i[e].length;a++){t.structure.push({});for(var o=0;o<n.length;o++)void 0!==i[e][a][n[o]]&&(t.structure[a][n[o]]=i[e][a][n[o]])}for(a=0;a<i[e].length;a++){_setPrevious=function(){if(0===a)t.previous=[];else{var n=a-1;if(void 0!==i[e][n].results&&i[e][n].results.length>0)for(var o=0;o<i[e][n].results.length;o++)t.previous.push(i[e][n].results[o])}};var r=!1,s=!1;if(void 0!==i[e][a]&&void 0!==i[e][a].candidates&&i[e][a].candidates.length>0&&void 0!==i[e][a].candidates[0].candidate){for(o=0;o<i[e][a].candidates.length;o++)void 0!==i[e][a].candidates[o].yes&&void 0!==i[e][a].candidates[o].no?r=!0:s=!0;if(r&&!s){t.current=i[e][a].name,_setPrevious(),t.candidates=i[e][a].candidates;(d=_calculateElectionResult(t))&&(i[e][a].results=d)}}else if(void 0!==i[e][a]&&void 0!==i[e][a].candidates&&i[e][a].candidates.length>0&&void 0===i[e][a].candidates[0].candidate&&i[e][a].candidates[0].length>0&&void 0!==i[e][a].candidates[0][0].candidate){_setPrevious();for(var l=0;l<i[e][a].candidates.length;l++){for(o=0;o<i[e][a].candidates[l].length;o++)void 0!==i[e][a].candidates[l][o].yes&&void 0!==i[e][a].candidates[l][o].no?r=!0:s=!0;if(r&&!s){t.current=[i[e][a].name,l],0===l&&(i[e][a].results=[]),t.candidates=i[e][a].candidates[l];var d;(d=_calculateElectionResult(t))&&(i[e][a].results.push(d),t.previous.push(d))}}}}}return!!d},e.fn._getElectionCurrentConfig_0=function(){i=a?e.extend({},n,a):e.extend({},n);var t=e(this)._getFormValues(C),o=[];for(var r in i){var s=Object.keys(i).indexOf(r);if(null===t[_[0].check.name+s])o.push(r);else for(var l=0;l<i[r].length;l++){var d=t[b[0].count.name+s+"_"+l];d&&(d=parseInt(d));var c=t[b[0].joint.name+s+"_"+l];c&&(c=JSON.parse(c)),null!=d?i[r][l].count=d:d=i[r][l].count,null!=c?i[r][l].joint=!0:d>1&&(i[r][l].joint=!1),d>1&&!c?void 0!==i[r][l].candidates&&void 0!==i[r][l].candidates[0]&&void 0!==i[r][l].candidates[0].candidate&&delete i[r][l].candidates:void 0!==i[r][l].candidates&&void 0!==i[r][l].candidates[0]&&void 0!==i[r][l].candidates[0][0]&&void 0!==i[r][l].candidates[0][0].candidate&&delete i[r][l].candidates}}for(var f=0;f<o.length;f++)delete i[o[f]];console.log("config step 0 (currentElectionConfig): "+JSON.stringify(i,null,2))},e.fn._getElectionCurrentConfig_1=function(){var t=e(this);_isValidCandidate=function(e){return void 0!==n[e]&&null!==n[e]&&""!==n[e]},_getCandidate=function(e){var t=n[e],a=n[e.replace(g,h)]||!1,i=n[e.replace(g,p)]||!1;return{[b[1].name.saveAs]:t,[b[1].female.saveAs]:a,[b[1].diverse.saveAs]:i}};var n=t._getFormValues(C);for(var a in i)for(var o=Object.keys(i).indexOf(a),r=0;r<i[a].length;r++){void 0===i[a][r].candidates&&(i[a][r].candidates=[]);i[a][r].name;var s,l,d=parseInt(i[a][r].count),c=i[a][r].joint,m=Object.keys(n),g=b[1].name.name,h=b[1].female.name,p=b[1].diverse.name;if(1===d||!0===c){t.find("["+f+'="'+o+"_"+r+'"]').find("["+u+"]");s=o+"_"+r+"_",l=_filterMatchingIndexes(m,g+s);for(var v=0,_=0;_<l.length;_++)if(_isValidCandidate(l[_])){var y=_getCandidate(l[_]);void 0===i[a][r].candidates&&(i[a][r].candidates=[]),void 0===i[a][r].candidates[_-v]&&(i[a][r].candidates[_-v]={}),i[a][r].candidates[_-v].candidate=y}else v++}else for(var S=0;S<d;S++){s=o+"_"+r+"_"+S+"_",l=_filterMatchingIndexes(m,g+s);for(v=0,_=0;_<l.length;_++)if(_isValidCandidate(l[_])){y=_getCandidate(l[_]);void 0===i[a][r].candidates&&(i[a][r].candidates=[]),void 0===i[a][r].candidates[S]&&(i[a][r].candidates[S]=[]),void 0===i[a][r].candidates[S][_-v]&&(i[a][r].candidates[S][_-v]={}),i[a][r].candidates[S][_-v].candidate=y}else v++}}console.log("config step 1 (currentElectionConfig): "+JSON.stringify(i,null,2))},e.fn._getElectionCurrentConfig_2=function(){var t=e(this),n=t._getFormValues(C);for(var a in i)for(var o=Object.keys(i).indexOf(a),r=0;r<i[a].length;r++){i[a][r].name;var s,l,d=parseInt(i[a][r].count),c=i[a][r].joint,m=Object.keys(n),g=b[2].yes.name,h=b[2].no.name;if(1===d||!0===c){t.find("["+f+'="'+o+"_"+r+'"]').find("["+u+"]");s=o+"_"+r+"_",l=_filterMatchingIndexes(m,g+s);for(var p=0;p<l.length;p++){var v=n[l[p]]||0,_=n[l[p].replace(g,h)]||0;i[a][r].candidates[p].yes=v,i[a][r].candidates[p].no=_}}else for(var y=0;y<d;y++){s=o+"_"+r+"_"+y+"_",l=_filterMatchingIndexes(m,g+s);for(p=0;p<l.length;p++){v=n[l[p]]||0,_=n[l[p].replace(g,h)]||0;i[a][r].candidates[y][p].yes=v,i[a][r].candidates[y][p].no=_}}}console.log("config step 2 (currentElectionConfig): "+JSON.stringify(i,null,2))},_buildStep_3=function(){var e=t.$targetElems.filter(s+3+'"]'),n=t.$targetElems.filter(l+3+'"]'),a=t.$targetElems.filter('[data-tg="election-subitemgroup-template-3"]'),o=t.$targetElems.filter(m+3+'"]');n.empty();for(var r in i){var d=Object.keys(i).indexOf(r),c=r,f=e.clone();f.removeAttr("data-tg style")._replaceTemplatePlaceholders([["title",c],["index",d]]);for(var u=f.find('[data-g-tg="election-subitemgroup-append-3"]'),h=0;h<i[r].length;h++){var p=i[r][h].name,v=a.clone();if(v._replaceTemplatePlaceholders([["index",h],["title",p]]).removeAttr("style data-tg").show(),void 0!==i[r][h].results&&i[r][h].results.length>0)for(var _=v.find(g+3+'"]'),b=0;b<i[r][h].results.length;b++){var C=o.clone(),y=i[r][h].results[b].candidate.name||"";C._replaceTemplatePlaceholders([["candidateName",y]]).removeAttr("style data-tg").show(),C.appendTo(_)}v.appendTo(u)}f.appendTo(n)}},_buildStep_2=function(){var n=t.$functionElems.filter(o+2+'"]'),a=t.$targetElems.filter(s+2+'"]'),r=t.$targetElems.filter(l+2+'"]'),v=t.$targetElems.filter(m+2+'"]');r.empty(),S.$select[2].empty().append(y);for(var _ in i){var w=Object.keys(i).indexOf(_),$=_;S.$select[2].append('<option value="'+w+'">'+$+"</option>");for(var E=0;E<i[_].length;E++){var x,k=i[_][E].name,T=parseInt(i[_][E].count),A=i[_][E].joint,I=i[_][E].candidates;if(_cloneStep_2=function(e){var t=a.clone(),n=e;S.$select[2].append('<option value="'+w+"_"+E+(void 0!==n?"_"+n:"")+'">'+x+"</option>"),t.removeAttr("data-tg style").attr(d,c).attr(f,void 0!==n?w+"_"+E+"_"+n:w+"_"+E)._replaceTemplatePlaceholders([["title",x],["index",w]]);var i;i=void 0!==n&&void 0!==I&&void 0!==I[n]&&I[n].length>0?I[n].length:void 0===n&&void 0!==I&&void 0!==I[0]&&void 0!==I[0].candidate&&I.length>0?I.length:0;for(var o=void 0!==n&&I?I[n]:I,s=t.find(g+2+'"]'),l=0;l<i;l++){var m=v.clone(),_=o[l].candidate.name||"";m._replaceTemplatePlaceholders([["index",i],["candidateName",_]]).removeAttr("style data-tg").attr(h,p).attr(u,i).show()._validateNumberInput();for(var y in b[2]){var $=m.find(b[2][y].selector),k=t.attr(f);$.length>0&&$.attr(C,b[2][y].name+k+"_"+l).attr("value",b[2][y].value)}o&&o[l]&&o[l].candidate&&(void 0!==o[l].yes&&o[l].yes>=0&&m.find('input[name^="yes"]').val(o[l].yes),void 0!==o[l].no&&o[l].no>=0&&m.find('input[name^="no"]').val(o[l].no)),m.appendTo(s)}t.appendTo(r)},1==T)x=$+" » "+k,_cloneStep_2();else if(A)x=$+" » "+k+" (gemeinsam "+T+")",_cloneStep_2();else for(var O=0;O<T;O++)x=$+" » "+k+" » "+(O+1)+"&thinsp;/&thinsp;"+T,_cloneStep_2(O)}}n.on("submit",function(t){t.preventDefault();e(this)._getElectionCurrentConfig_2(),_getElectionResult()&&_buildStep_3()})},_buildStep_1=function(){var n=t.$functionElems.filter(o+1+'"]'),a=t.$targetElems.filter(s+1+'"]'),r=t.$targetElems.filter(l+1+'"]');t.$targetElems.filter(m+1+'"]');r.empty(),S.$select[1].empty().append(y);for(var u in i){var g=Object.keys(i).indexOf(u),h=u;S.$select[1].append('<option value="'+g+'">'+h+"</option>");for(var p=0;p<i[u].length;p++){var v,_=i[u][p].name,b=parseInt(i[u][p].count),C=i[u][p].joint,w=i[u][p].candidates;if(_cloneStep_1=function(t){var n=a.clone(),i=t;S.$select[1].append('<option value="'+g+"_"+p+(void 0!==i?"_"+i:"")+'">'+v+"</option>"),n.removeAttr("data-tg style").attr(d,c).attr(f,void 0!==i?g+"_"+p+"_"+i:g+"_"+p)._replaceTemplatePlaceholders([["title",v],["index",g]]);var o;o=void 0!==i&&void 0!==w&&void 0!==w[i]&&w[i].length>0?w[i].length:void 0===i&&void 0!==w&&void 0!==w[0]&&void 0!==w[0].candidate&&w.length>0?w.length:1!=b&&C?b+3:4,n._addSublistItems(o,g,p,i,w),n.find('[data-g-fn="add-subitems"]').on("click",function(t){t.preventDefault();var n=e(this).closest("["+d+'="'+c+'"]'),a=n.find('[data-g-tg="add-subitems-count"]').val();n._addSublistItems(a,g,p,i)}),n.appendTo(r)},1==b)v=h+" » "+_,_cloneStep_1();else if(C)v=h+" » "+_+" (gemeinsam "+b+")",_cloneStep_1();else for(var $=0;$<b;$++)v=h+" » "+_+" » "+($+1)+"&thinsp;/&thinsp;"+b,_cloneStep_1($)}}n.on("submit",function(t){t.preventDefault();e(this)._getElectionCurrentConfig_1(),_buildStep_2()})},_buildStep_0=function(){var r=t.$functionElems.filter(o+0+'"]'),u=t.$targetElems.filter(s+0+'"]'),h=t.$targetElems.filter(l+0+'"]'),p=t.$targetElems.filter(m+0+'"]');for(var v in n){var y=Object.keys(n).indexOf(v),S=u.clone();S.removeAttr("data-tg style").attr(d,c).attr(f,y)._replaceTemplatePlaceholders([["title",v],["index",y]]);for(var w in _[0]){(T=S.find(_[0][w].selector)).length>0&&(T.attr(C,_[0][w].name+y).attr("value",_[0][w].value),a[v]&&T.attr("checked",""))}for(var $=S.find(g+0+'"]'),E=0;E<n[v].length;E++){var x=E,k=p.clone();n[v][E].countVariable?!i[v][E].count>1&&k.find('[data-tp-o="3"]').hide():Number.isInteger(n[v][E].count)&&n[v][E].count>1||k.find('[data-tp-o="3"]').remove(),n[v][E].countVariable?k.find('[data-tp-o="1"]').remove():k.find('[data-tp-o="2"]').remove(),k.removeAttr("data-tg style")._replaceTemplatePlaceholders([["electionItemType",n[v][E].name],["electionItemCount",n[v][E].count],["itemIndex",y],["index",x]])._validateNumberInput();for(var w in b[0]){var T;(T=k.find(b[0][w].selector)).length>0&&(T.attr(C,b[0][w].name+y+"_"+x).attr("value",b[0][w].value),T.is('[name^="count"]')&&i[v]&&i[v][E]&&!0===i[v][E].countVariable&&i[v][E].count>0&&T.attr("value",i[v][E].count),T.is('[type="checkbox"]')&&i[v]&&i[v][E]&&i[v][E].joint===JSON.parse(b[0].joint.value)&&T.attr("checked",""))}k.appendTo($)}S.appendTo(h).checkSlideToggle({triggerSelector:'[data-g-fn="accordion-trigger"]'})}r.on("submit",function(t){t.preventDefault();e(this)._getElectionCurrentConfig_0(),_buildStep_1()})};var S={currentStep:0,steps:4,$electionStep:[],$stepPrev:[],$stepNext:[],$select:[]};S._prev=function(){S.currentStep==S.steps-1?(S.currentStep=S.currentStep-2,S.$electionStep[S.currentStep+2].hide()):S.currentStep=S.currentStep>0?S.currentStep-1:0,S.$electionStep[S.currentStep+1].hide(),S.$electionStep[S.currentStep].show(),S.toTop(),console.log("nav prev "+S.currentStep)},S._next=function(){S.currentStep=S.currentStep<S.steps?S.currentStep+1:S.steps,S.currentStep<S.steps-1&&(S.$electionStep[S.currentStep-1].hide(),S.toTop()),S.$electionStep[S.currentStep].show(),console.log("nav next "+S.currentStep)},S.toTop=function(){t.$functionElems.filter('[data-fn="to-top-wrapper"]').children("a").trigger("click")},S._init=function(){for(var n=0;n<=S.steps;n++)S.$electionStep[n]=t.$targetElems.filter('[data-tg="election-step-'+n+'"]'),n>0&&n<S.steps-1&&(S.$stepPrev[n]=t.$functionElems.filter('[data-fn="election-back-'+n+'"]'),S.$stepPrev[n].on("click",function(e){e.preventDefault(),S._prev()})),n<S.steps&&(S.$stepNext[n]=t.$functionElems.filter(o+n+'"]'),S.$stepNext[n].on("submit",function(){S._next()})),n!==S.currentStep&&S.$electionStep[n].hide(),t.$functionElems.filter(r+n+'"]').length>0&&(S.$select[n]=t.$functionElems.filter(r+n+'"]'),S.$select[n].on("change",function(){console.log("change "+e(this).val());var t=e(this).val(),n=e(this).closest("form");-1!=t?(n.find("["+f+"]").hide(),n.find("["+f+'^="'+t+'"]').show()):n.find("["+f+"]").show()}))},e.fn.dibElection=function(){_buildStep_0(),S._init()}}(jQuery,MY_UTILS),function(e,t){e.fn.dropdownMultilevel=function(n){function a(){for(var t=r.length-1;t>=0;t--)e(r[t])._closeDropdown()}function i(o){t.$body.one("click.body",function(t){var s=e(t.target);if(o.length>0)if(-1==e.inArray(s[0],l)){var d=e(o[o.length-1])._getList();d.children().children(n.closeElemSelector).parent().has(s).length>0?(t.preventDefault(),e(o[o.length-1])._closeDropdown(),i(r)):d.has(s).length>0||d.is(s)?i(r):!d.has(s).length>0&&a()}else i(r)})}var o={openedClass:t.classes.open,hasOpenedSublevelClass:"has-"+t.classes.open,animatingClass:t.classes.animating,closeElemSelector:'[data-fn="dropdown-multilevel-close"]',excludedBodyElements:'[data-tg="dropdown-multilevel-excluded"]',scrollDuration:100};n=e.extend({},o,n);var r=[],s=e(this),l=t.$targetElems.filter(n.excludedBodyElements);e.fn._getTarget=function(){var n,a=e(this);if(a.attr(t.attributes.target)){var i=a.attr(t.attributes.target);n=t.$targetElems.filter(i).lenght>0?t.$targetElems.filter(i):e(i)}else n=a.parent("li");return n},e.fn._getList=function(){var t=e(this);return t._getTarget().find('[aria-labelledby="'+t.attr("id")+'"]')},e.fn._getCloseElem=function(){return e(this)._getList().children().fist().find('[data-fn="dropdown-multilevel-close"]')},e.fn._getParentList=function(){return e(this)._getTarget().parent("ul")},e.fn._openDropdown=function(){var t=e(this),a=t._getTarget(),i=t._getParentList();a.addClass(n.openedClass).setRemoveAnimationClass(n.animatingClass),t.ariaExpanded("true"),i.animate({scrollTop:0},n.scrollDuration,function(){e(this).addClass(n.hasOpenedSublevelClass)}),r.push(t)},e.fn._closeDropdown=function(){var t=e(this),a=t._getTarget(),i=t._getParentList();a.removeClass(n.openedClass).setRemoveAnimationClass(n.animatingClass),t.ariaExpanded("false"),i.removeClass(n.hasOpenedSublevelClass),r.pop()},s.each(function(){var n=e(this),o=(n.attr(t.attributes.target),n._getTarget()),s=n._getList();n.on("click",function(l){if(o.length>0&&s.length>0){t.$body.off("click.body");var d=e(l.target),c=e(r[r.length-1]);if(c.has(d).length>0||c.is(d))l.preventDefault(),e(r[r.length-1])._closeDropdown(),r.length>0&&i(r);else if(s.is(":visible")&&s.elemPositionedInside(o.parent()))i(r);else{if(l.preventDefault(),r.length>0){!e(r[r.length-1])._getList().has(n).length>0&&a()}n._openDropdown();var f;(f=n.getOptionsFromAttr())&&f.focusOnOpen&&t.$targetElems.filter(f.focusOnOpen).focus(),l.stopPropagation(),i(r)}}})}),t.$window.on("orientationchange sizeChange",function(){a()})}}(jQuery,MY_UTILS),function(e,t,n,a){var i=e(t),o=e(n);e.fn.lazyload=function(n){function r(){var t=0;l.each(function(){var n=e(this);if(!d.skip_invisible||n.is(":visible"))if(e.abovethetop(this,d)||e.leftofbegin(this,d));else if(e.belowthefold(this,d)||e.rightoffold(this,d)){if(++t>d.failure_limit)return!1}else n.trigger("appear"),t=0})}var s,l=this,d={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAQAAAC0NkA6AAAALklEQVR42u3NMQEAAAgDoC2G/YuawcMPCtBM3lUikUgkEolEIpFIJBKJRCKR3CwjqQUVkFI2GQAAAABJRU5ErkJggg=="};return n&&(a!==n.failurelimit&&(n.failure_limit=n.failurelimit,delete n.failurelimit),a!==n.effectspeed&&(n.effect_speed=n.effectspeed,delete n.effectspeed),e.extend(d,n)),s=d.container===a||d.container===t?i:e(d.container),0===d.event.indexOf("scroll")&&s.bind(d.event,function(){return r()}),this.each(function(){var n=this,a=e(n);n.loaded=!1,e.fn.resizeUnloadImg=function(){var t=e(this),n=t.attr("width"),a=t.attr("height");if(n&&a){t.css({width:"",height:""});var i=parseInt(t.css("width")),o=n,r=a;i!=n&&(o=i,r=a/n*i),t.css({width:o+"px",height:r+"px"})}},a.is("img")&&!a.attr("src")&&a.one("load",function(){var e=a.attr("width"),o=a.attr("height");if(e&&o){var r=a.attr("data-"+d.data_attribute).replace(/[/.]/g,"_");a.resizeUnloadImg(),i.on("sizeChange.lazyloadUnload."+r,function(){n.loaded?i.unbind("sizeChange.lazyloadUnload."+r+" resize.lazyloadUnload."+r):a.resizeUnloadImg()}),i.on("resize.lazyloadUnload."+r,function(){t.mediaSize&&"xs"==t.mediaSize&&(n.loaded?i.unbind("sizeChange.lazyloadUnload."+r+" resize.lazyloadUnload."+r):a.resizeUnloadImg())})}}).attr("src",d.placeholder),a.one("appear",function(){if(!this.loaded){if(d.appear){var t=l.length;d.appear.call(n,t,d)}e("<img>").bind("load",function(){var t=a.attr("data-"+d.data_attribute);if(a.is("img"))a.hide(),a.attr("src",t),a.css({width:"",height:""}),a[d.effect](d.effect_speed);else{var i=a.css("background-image");a.css({backgroundImage:"url('"+t+"'), "+i})}n.loaded=!0;var o=e.grep(l,function(e){return!e.loaded});if(l=e(o),d.load){var r=l.length;d.load.call(n,r,d)}}).attr("src",a.attr("data-"+d.data_attribute)),a.trigger("loaded")}}),0!==d.event.indexOf("scroll")&&a.bind(d.event,function(){n.loaded||a.trigger("appear")})}),o.ready(function(){r()}),i.on("load resize",function(){r()}),this},e.belowthefold=function(n,o){return(o.container===a||o.container===t?(t.innerHeight?t.innerHeight:i.height())+i.scrollTop():e(o.container).offset().top+e(o.container).height())<=e(n).offset().top-o.threshold},e.rightoffold=function(n,o){return(o.container===a||o.container===t?i.width()+i.scrollLeft():e(o.container).offset().left+e(o.container).width())<=e(n).offset().left-o.threshold},e.abovethetop=function(n,o){return(o.container===a||o.container===t?i.scrollTop():e(o.container).offset().top)>=e(n).offset().top+o.threshold+e(n).height()},e.leftofbegin=function(n,o){return(o.container===a||o.container===t?i.scrollLeft():e(o.container).offset().left)>=e(n).offset().left+o.threshold+e(n).width()},e.inviewport=function(t,n){return!(e.rightoffold(t,n)||e.leftofbegin(t,n)||e.belowthefold(t,n)||e.abovethetop(t,n))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),function(e,t){e.fn.remoteEvent=function(){e(this).each(function(){var n=e(this),a=n.attr(t.attributes.target)||"",i=t.$targetElems.filter(a).lenght>0?t.$targetElems.filter(a):e(a),o=n.getOptionsFromAttr(),r=o.triggerEvent||"click",s=o.remoteEvent||"click";n.on(r,function(){i.length>0&&i.trigger(s)})})}}(jQuery,MY_UTILS),function(e,t){e.fn.simpleSlideToggle=function(n){var a={effectIn:"slideDown",effectOut:"slideUp",effectDuration:400,openedClass:t.classes.open,animatingClass:t.classes.animating,animatingInClass:t.classes.animatingIn,animatingOutClass:t.classes.animatingOut};n=e.extend({},a,n);e(this).each(function(){var t=e(this),a=t.find(n.triggerSelector),i=t.find(n.bodySelector);t.is("."+n.openedClass)||i.css({display:"none"}),a.on("click",function(){t.is("."+n.openedClass)?(console.log("close"),t.addClass(n.animatingClass).addClass(n.animatingOutClass).removeClass(n.openedClass),i.stop()[n.effectOut](n.effectDuration,function(){t.removeClass(n.animatingClass).removeClass(n.animatingOutClass)})):(console.log("open"),t.addClass(n.animatingClass).addClass(n.animatingInClass),i.stop()[n.effectIn](n.effectDuration,function(){t.addClass(n.openedClass).removeClass(n.animatingClass).removeClass(n.animatingInClass)}))})})}}(jQuery,MY_UTILS),function(e,t){e.fn.stickyContainer=function(n){function a(){s=t.$window.height(),o=l.offset().top+l.outerHeight()+parseInt(l.css("margin-bottom"))||0,r=d.offset().top-parseInt(d.css("margin-top"))||s,c="fixed"==l.css("position")||"fixed"==d.css("position")}var i=e(this);n=e.extend({},{keepBelowSelector:"",keepAboveSelector:"",topDistance:0,bottomDistance:0,fixedClass:"fixed",activeHashScrollToDistance:30},n);var o,r,s,l=t.$targetElems.filter(n.keepBelowSelector).lenght>0?t.$targetElems.filter(n.keepBelowSelector):e(n.keepBelowSelector),d=t.$targetElems.filter(n.keepAboveSelector).lenght>0?t.$targetElems.filter(n.keepAboveSelector):e(n.keepAboveSelector),c=!1;e.fn._copyWidthFromParent=function(){if($this=e(this),$thisParent=$this.parent(),$this.is(":visible")){var t=parseInt($thisParent.css("padding-left")),n=$thisParent.innerWidth()-t-parseInt($thisParent.css("padding-right")),a=$thisParent.offset().left+t;$this.css({width:n+"px",left:a+"px"})}},i.length>0&&(a(),i.each(function(){function i(){if(l.is(":visible")){c&&a();var e=l.parent().offset().top,f=d.outerHeight(),u=t.$document.scrollTop();if(e>u&&e>o&&e+f<s&&e+f<r)l.removeClass(n.fixedClass).css({top:"auto",bottom:"auto"});else{var m=o-u+n.topDistance>0?o-u+n.topDistance:0,g=r-u+n.bottomDistance>s?0:s-(r-u)+n.bottomDistance;l.addClass(n.fixedClass).css({top:m,bottom:g})}t.$window.on("load resize",function(){i()})}}var l=e(this),d=l.children().first();l._copyWidthFromParent(),i(),t.$window.on("scroll",function(){i()}),t.$window.on("resize orientationchange",function(){a(),l._copyWidthFromParent(),i()});if(l.getOptionsFromAttr()){var f=window.location.hash,u=d.find('a[href="'+f+'"]');if(f&&"#"!=f&&u.length>0){var m=u.offset().top,g=parseInt(u.outerHeight()),h=l.offset().top,p=l.height();if(m>h+p){var v=m-h-p+g+n.activeHashScrollToDistance;l.scrollTop(v)}}}}))}}(jQuery,MY_UTILS),function(e){e.fn.submitOnChange=function(){e(this).each(function(){var t=e(this),n=t.closest("form");t.on("change",function(){n.submit()})})}}(jQuery),function(e,t){e.fn.toggleToTopButton=function(n){function a(){t.$document.scrollTop()>100?$elem.is("."+n.visibleClass)||$elem.addClass(n.visibleClass):$elem.is("."+n.visibleClass)&&$elem.removeClass(n.visibleClass)}$elem=e(this);var i={threshold:100,visibleClass:t.classes.open};n=e.extend({},i,n),a(),t.$window.on("scroll resize",function(){a()})}}(jQuery,MY_UTILS),function(e,t){e.fn.toggle=function(){e(this).each(function(){var n=e(this),a=n.attr(t.attributes.target)||"",i=t.$targetElems.filter(a).lenght>0?t.$targetElems.filter(a):e(a),o=t.classes.open,r=t.classes.animating;i.getTransitionDuration();n.on("click",function(){i.length>0&&(i.is("."+o)?(i.removeClass(o),n.ariaExpanded("false")):(i.addClass(o),n.ariaExpanded("true")),i.setRemoveAnimationClass(r))})})}}(jQuery,MY_UTILS),function(e,t){t.$functionElems.filter('[data-fn="toggle"]').toggle(),t.$functionElems.filter('[data-fn="dropdown-multilevel"]').dropdownMultilevel(),t.$functionElems.filter('[data-fn="remote-event"]').remoteEvent(),t.$functionElems.filter('[data-fn="submit-on-change"]').submitOnChange(),e('[data-fn="accordion"]').simpleSlideToggle({triggerSelector:'[data-fn="accordion-trigger"]',bodySelector:'[data-fn="accordion-content"]'}),t.$functionElems.filter('[data-fn="sticky-container"]').stickyContainer({keepBelowSelector:'[data-tg="sticky-container-below"]',keepAboveSelector:'[data-tg="sticky-container-above"]',topDistance:1,bottomDistance:16}),e.fn.initLazyload=function(t){var n={effect:"fadeIn",event:"undefined"!=typeof Modernizr&&Modernizr.touchevents?"scroll touchmove":"scroll",data_attribute:"src"};t=e.extend({},n,t);e(this).each(function(n,a){var i=e(a);i.attr("data-fn-effect")&&(t.effect=i.attr("data-fn-effect")),i.lazyload(t)})},t.$functionElems.filter('[data-fn="lazyload"]').initLazyload(),e('a[href^="#"]:not([href="#"])').animatedAnchors({offset:function(){return t.anchorOffsetTop}}),t.$functionElems.filter('[data-fn="to-top-wrapper"]').toggleToTopButton(),t.$functionElems.filter('[data-fn="dib-election-tool"]').dibElection()}(jQuery,MY_UTILS);