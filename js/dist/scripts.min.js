var MY_UTILS=function(e){var t={$document:e(document),$window:e(window),$body:e("body"),$scrollRoot:e("html, body"),$functionElems:null,$targetElems:null,selectors:{functionElement:"[data-fn]",targetElement:"[data-tg]"},attributes:{target:"data-fn-target",options:"data-fn-options"},classes:{open:"show",animating:"animating",animatingIn:"animating-in",animatingOut:"animating-out"},mediaSize:null,mediaSizes:[{breakpoint:0,label:"xs"},{breakpoint:576,label:"sm"},{breakpoint:768,label:"md"},{breakpoint:992,label:"lg"},{breakpoint:1200,label:"xl"}],anchorOffsetTop:0},n=e(t.selectors.functionElement+", "+t.selectors.targetElement);t.$functionElems=n.filter(t.selectors.functionElement),t.$targetElems=n.filter(t.selectors.targetElement);var a=t.$functionElems.filter('[data-fn="anchor-offset-elem"]');e.fn._getAnchorOffset=function(){return(a.length>0?this.outerHeight():0)+20},t.anchorOffsetTop=a._getAnchorOffset(),t.$window.on("sizeChange",function(){t.anchorOffsetTop=a._getAnchorOffset()});function o(e){try{return e=JSON.parse(e)}catch(t){return e}}e.fn.getTransitionDuration=function(){var e=0,t="transition-duration",n=["webkit","ms","moz","o"];if(this.css(t))e=this.css(t);else for(i=0;i<n.length;i++)if(this.css("-"+n[i]+"-"+t)){e=this.css("-"+n[i]+"-"+t);break}return e.indexOf("ms")>-1?parseFloat(e):1e3*parseFloat(e)},e.fn.setRemoveAnimationClass=function(n){n||t.classes.animating;var a=e(this),i=a.getTransitionDuration();if(i>0){a.addClass(n);setTimeout(function(){a.removeClass(n)},i)}},e.fn.elemPositionedInside=function(t){var n=e(this),a=e(t),i=n.offset().left,o=n.offset().top,r=n.width(),s=n.height(),l=a.offset().left,d=a.offset().top,c=a.outerWidth(),f=a.outerHeight();return i>=l&&i+r<=l+c&&o>=d&&o+s<=d+f},e.fn.ariaExpanded=function(t){return void 0!==t?(e(this).attr("aria-expanded",t),t):o(e(this).attr("aria-expanded"))},e.fn.aria=function(t,n){return void 0!==n?(e(this).attr("aria-"+t,n),n):o(e(this).attr("aria-"+t))};return _getmediaSize=function(){var e;if(window.matchMedia)for(i=0;i<t.mediaSizes.length-1;i++){if(window.matchMedia("(max-width: "+(t.mediaSizes[i+1].breakpoint-1)+"px)").matches){e=t.mediaSizes[i].label;break}e=t.mediaSizes[t.mediaSizes.length-1].label}else for(i=0;i<t.mediaSizes.length-1;i++){if(t.$window.width()<t.mediaSizes[i+1].breakpoint){e=t.mediaSizes[i].label;break}e=t.mediaSizes[t.mediaSizes.length-1].label}e!=t.mediaSize&&(t.$body.removeClass("media-"+t.mediaSize),t.$body.addClass("media-"+e),t.mediaSize=e,t.$window.trigger("sizeChange"))},t.$document.ready(function(){_getmediaSize(),t.$window.trigger("sizeChangeReady")}),t.$window.on("resize",function(){_getmediaSize()}),e.fn.getOptionsFromAttr=function(){var n=e(this).attr(t.attributes.options);return void 0!==n&&new Function("return "+n)()},t}(jQuery),DIB_ELECTION_CALCULATOR=(jQuery,{getResult:function(e){var t,n=[];function a(e){t={headline:e,content:[]},n.push(t)}function i(e){var t=e.name;return e.female&&(t+=" (f)"),e.diverse&&(t+=" (v)"),t}function o(e,n=!1){var a={headline:e,type:"list",items:[]};for(var o of u)a.items.push({item:i(o.candidate),selected:o.selected|n});t.content.push(a)}function r(e,n=""){t.content.push({headline:n,type:"text",items:[{item:e}]})}function s(e){return{error:{text:e}}}function l(e){return JSON.stringify(e,null,2)}function d(e){console.log(e)}d("***********"),d("** INPUT **"),d("***********"),d(l(e)),d("***********");for(var c=0;c<e.structure.length&&e.structure[c].name!=e.current;)c++;if(c>=e.structure.length)return s("current election is not configured");var f=e.structure[c];if(!f.joint&&1!=f.count)return s("only joint elections implemented");var u=e.candidates.filter(e=>Number(e.yes)>Number(e.no));for(var m of u)m.priority=[Number(m.yes),-Number(m.no),Math.random()];u.sort((e,t)=>(function(e,t){if(e.length!=t.length)return s("array lengths for lexical order comparison differ");for(var n=0;n<e.length;n++)if(diff=t[n]-e[n],diff)return diff;return 0})(e.priority,t.priority));for(var m of u)delete m.priority;d("successful candidates: "+l(u)),a("Erfolgreiche Kandidierende"),o("Die erforderliche Mehrheit nach §10 haben erreicht, in Reihenfolge nach §11:",!0);for(var v=0;v<f.count&&v<u.length;v++)u[v].selected=!0;if(u.length<=f.count)d((u.length==f.count?"as many successful candidates as":"fewer successful candidates than")+" offices -- all successful candidates have been elected"),r("Es gibt "+(u.length==f.count?"ebenso viele erfolgreiche Kandidierende wie":"weniger erfolgreiche Kandidierende als")+" zu vergebende Ämter; daher sind alle erfolgreichen Kandidierenden gewählt.");else{var g=u.slice().reverse();a("Zu reservierende Ämter");var p=f.count;f.overall&&(p+=e.previous.length);var h={female:1==p?0:p+1>>1,diverse:p+1>>2};d("quotas: "+l(h));function y(e,t,n){var a=e;a+=" ",a+=h.female+h.diverse==1?t:n,h.female&&(a+=" "+h.female+" "+(h.female>1?"Ämter":"Amt")+" für Frauen"),h.female&&h.diverse&&(a+=" und"),h.diverse&&(a+=" "+h.diverse+" "+(h.diverse>1?"Ämter":"Amt")+" für Vielfalt"),h.female||h.diverse||(a+=" keine Ämter"),r(a+=" zu reservieren.")}if(f.overall){y("Im Gremium insgesamt","ist","sind");for(var _ of["female","diverse"])for(var b of e.previous)b.candidate[_]&&h[_]&&h[_]--;d("remaining quotas in overall election: "+l(h)),y("Davon","verbleibt","verbleiben")}else y("Es","ist","sind");for(var _ in h)h[_]>p&&(d("more reservations for "+_+" candidates than offices"),h[_]=p);function S(e){return u.filter(t=>t.selected&&t.candidate[e]).length}function C(e){return S(e)>=h[e]}function E(){d("------------------------------------------------------------------")}function x(){for(var e of u)d((e.selected?"** ":"   ")+i(e.candidate));E()}function $(e){return u.find(t=>e(t)&&!t.selected)}function w(e){return g.find(t=>e(t)&&t.selected)}function k(e){return $(t=>t.candidate[e])}function O(e){return w(t=>!t.candidate[e])}function V(e,t,n=null){d("replacing "+t.candidate.name+" by "+e.candidate.name),n&&r("Zur Erfüllung der "+n+"quote wird "+t.candidate.name+" in der Auswahl durch "+e.candidate.name+" ersetzt:"),e.selected=!0,t.selected=!1,o("")}if(a("Anwendung der Quotierungsregeln"),o("Ursprüngliche Auswahl vor Anwendung der Quotierungsregeln"),d("initial selection:"),x(),h.diverse){for(r("Erfüllung der Vielfaltsquote:"),d("ensuring diversity quota"),E();!C("diverse");){if(!(I=k("diverse"))){r("Es gibt nicht genügend erfolgreiche Kandidierende mit Vielfalt, um die Vielfaltsquote zu erfüllen."),d("not enough successful candidates to fulfil diversity quota");break}if(!(M=O("diverse")))return s("more reservations for diversity than offices");V(I,M,"Vielfalts"),x()}var T=C("diverse");d(T?"diversity quota fulfilled":"diversity quota not fulfilled"),r("Die Vielfaltsquote ist "+(T?"":"nicht ")+"erfüllt."),x(),T||(h.diverse=S("diverse"))}else d("no diversity quota applies");if(h.female){for(r("Erfüllung der Frauenquote:"),d("ensuring women's quota"),E();!C("female");){var I;if(!(I=k("female"))){d("not enough successful candidates to fulfil women's quota");break}var M;if(!(M=O("female")))throw new Error("more reservations for women than offices");if(V(I,M,"Frauen"),!C("diverse")){d("replacement violated diversity quota -- undoing"),r("Die Ersetzung würde die Vielfaltsquote erfüllen und wird deshalb rückgängig gemacht:"),V(M,I);var D=w(e=>!e.candidate.female&&!e.candidate.diverse);if(D)M=D;else{var A=$(e=>e.candidate.female&&e.candidate.diverse);A?I=A:(r("Es kann keine Ersetzung zur Erfüllung der Frauenquote vorgenommen werden, ohne die Vielfaltsquote zu verletzen."),d("cannot make a replacement without violating diversity quota -- women's quota can't be fulfilled"))}V(I,M,"Frauen")}x()}var j=C("female");d(j?"women's quota fulfilled":"women's quota not fulfilled"),r("Die Frauenquote ist "+(j?"":"nicht ")+"erfüllt."),E()}else d("no women's quota applies");o("Ergebnis nach Anwendung der Quotierungsregeln:")}d("Final selection:");for(var B of u.filter(e=>e.selected))d(B.candidate.name);var P={};P.explanation=n,P.candidates=u.filter(e=>e.selected).map(function(e){return{candidate:e.candidate}}),d("output: "+l(P));for(var m of u)delete m.selected;return P}});!function(){var e=/iPad|iPhone|iPod/.test(navigator.platform)&&!window.MSStream,t=/(android)/i.test(navigator.userAgent);e?document.body.className+=" is-ios":t&&(document.body.className+=" is-android");var n=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var a=e.indexOf("Edge/");return a>0&&parseInt(e.substring(a+5,e.indexOf(".",a)),10)}();if(!1!==n&&n>9)for(document.body.className+=" ie ie"+n,i=n;i<=14;i++)document.body.className+=" ielte"+i;if(e){var a=document.body.children;for(i=0;i<a.length;i++)"DIV"==a[i].tagName&&a[i].setAttribute("onclick","void(0);")}}(),function(e,t){e.fn.animatedAnchors=function(n){var a=e(this);if(n=e.extend({},{scrollToInitialHash:!0,scrollDurationMin:300,scrollDurationMax:800,scrollDurationPer1000:400,offset:function(){return 0},scrollTolerance:1,fixedClass:"fixed"},n),e.fn._animatedScrollTo=function(){$this=e(this);var a=t.$window.scrollTop(),i=$this.offset().top+n.scrollTolerance,o=Math.abs(i-n.offset()-a)*n.scrollDurationPer1000/1e3;o<n.scrollDurationMin?o=n.scrollDurationMin:o>n.scrollDurationMax&&(o=n.scrollDurationMax),t.$scrollRoot.animate({scrollTop:i-n.offset()},o)},n.scrollToInitialHash){var i=e(window.location.hash);window.location.hash&&i.length>0&&(i._animatedScrollTo(),t.$window.on("load",function(){i._animatedScrollTo()}))}a.each(function(){var t=e(this);t.on("click",function(){var n=t.attr("href"),a=e(n);a.length>0&&a._animatedScrollTo()})})}}(jQuery,MY_UTILS),function(e,t){e.fn.checkSlideToggle=function(n){var a={effectIn:"slideDown",effectOut:"slideUp",effectDuration:400,triggerSelector:'input[type="checkbox"]',openedClass:t.classes.open,animatingClass:t.classes.animating,animatingInClass:t.classes.animatingIn,animatingOutClass:t.classes.animatingOut};n=e.extend({},a,n);e(this).each(function(){var t=e(this),a=t.find(n.triggerSelector),i=t.find(e(a.attr("aria-controls")));a.is(":checked")?(t.addClass(n.openedClass),a.ariaExpanded(!0),i.show()):(t.removeClass(n.openedClass),a.ariaExpanded(!1),i.hide()),a.on("change",function(){a.ariaExpanded()?(t.addClass(n.animatingClass).addClass(n.animatingOutClass).removeClass(n.openedClass),a.ariaExpanded(!1),i.stop()[n.effectOut](n.effectDuration,function(){t.removeClass(n.animatingClass).removeClass(n.animatingOutClass)})):(t.addClass(n.animatingClass).addClass(n.animatingInClass),a.ariaExpanded(!0),i.stop()[n.effectIn](n.effectDuration,function(){t.addClass(n.openedClass).removeClass(n.animatingClass).removeClass(n.animatingInClass)}))})})}}(jQuery,MY_UTILS),function(e,t,n){var a={Vorstand:[{name:"Vorsitzende",count:2},{name:"Schatzmeister*in",count:1},{name:"weitere Mitglieder",count:"variable",countVariable:!0,overall:!0}],Schiedsgericht:[{name:"Richter*innen",count:3},{name:"Ersatzrichter*innen",count:2,overall:!0}],"Kassenprüfer*innen":[{name:"Kassenprüfer*innen",count:2}]},i="currentElectionConfig";localStorage.getItem(i)&&(o=JSON.parse(localStorage.getItem(i)));var o,r=new URL(document.location.href).searchParams.get("preset");2==r?o={Vorstand:[{name:"Vorsitzende",count:2,joint:!0,candidates:[{candidate:{name:"Lina Limone",female:!0,diverse:!1},yes:18,no:2},{candidate:{name:"Manfred Mango",female:!1,diverse:!1},yes:12,no:1},{candidate:{name:"Olivia Orange",female:!0,diverse:!0},yes:12,no:0}]},{name:"Schatzmeister*in",count:1,candidates:[{candidate:{name:"Anna Ananas",female:!0,diverse:!0},yes:12,no:4},{candidate:{name:"Cora Cocos",female:!0,diverse:!1},yes:7,no:1}]},{name:"weitere Mitglieder",count:3,countVariable:!0,overall:!0,joint:!1,candidates:[[{candidate:{name:"Maria Maracuja",female:!0,diverse:!0},yes:12,no:0},{candidate:{name:"Bernard Banane",female:!1,diverse:!1},yes:12,no:1}],[{candidate:{name:"Kira Kirsch-Banane",female:!0,diverse:!1},yes:18,no:2},{candidate:{name:"Alfred Apfel",female:!1,diverse:!0},yes:11,no:3},{candidate:{name:"Anna Ananas",female:!0,diverse:!0},yes:12,no:4},{candidate:{name:"Cora Cocos",female:!0,diverse:!1},yes:7,no:1}],[{candidate:{name:"Kilian Kiwi",female:!1,diverse:!0},yes:7,no:0},{candidate:{name:"Mandy Mandarine",female:!0,diverse:!0},yes:8,no:2},{candidate:{name:"Melly Melone",female:!0,diverse:!1},yes:15,no:3}]]}]}:1==r?o={Vorstand:[{name:"Vorsitzende",count:2,joint:!0,candidates:[{candidate:{name:"Lina Limone",female:!0,diverse:!1},yes:18,no:2},{candidate:{name:"Manfred Mango",female:!1,diverse:!1},yes:12,no:1},{candidate:{name:"Olivia Orange",female:!0,diverse:!0},yes:12,no:0}],results:[{candidate:{name:"Lina Limone",female:!0,diverse:!1}},{candidate:{name:"Manfred Mango",female:!1,diverse:!1}}]},{name:"Schatzmeister*in",count:1,candidates:[{candidate:{name:"Kilian Kiwi",female:!1,diverse:!0},yes:7,no:0},{candidate:{name:"Mandy Mandarine",female:!0,diverse:!0},yes:8,no:2},{candidate:{name:"Melly Melone",female:!0,diverse:!1},yes:15,no:3}],results:[{candidate:{name:"Melly Melone",female:!0,diverse:!1}}]},{name:"weitere Mitglieder",count:3,countVariable:!0,overall:!0,joint:!0,candidates:[{candidate:{name:"Maria Maracuja",female:!0,diverse:!0},yes:12,no:0},{candidate:{name:"Bernard Banane",female:!1,diverse:!1},yes:12,no:1},{candidate:{name:"Kira Kirsch-Banane",female:!0,diverse:!1},yes:18,no:2},{candidate:{name:"Alfred Apfel",female:!1,diverse:!0},yes:11,no:3},{candidate:{name:"Anna Ananas",female:!0,diverse:!0},yes:12,no:4},{candidate:{name:"Cora Cocos",female:!0,diverse:!1},yes:7,no:1}]}],Schiedsgericht:[{name:"Richter*innen",count:3,joint:!0,candidates:[{candidate:{name:"Pablo Papaya",female:!1,diverse:!0},yes:8,no:0},{candidate:{name:"Lydia Litschi",female:!1,diverse:!1},yes:5,no:1},{candidate:{name:"Eduard Erdbeere",female:!0,diverse:!0},yes:7,no:0}]},{name:"Ersatzrichter*innen",count:2,joint:!0,overall:!0,candidates:[{candidate:{name:"Holly Holunder",female:!0,diverse:!1},yes:15,no:1},{candidate:{name:"Hila Himbeere",female:!0,diverse:!0},yes:9,no:0}]}]}:3==r?o={Vorstand:[{name:"Vorsitzende",count:2,joint:!0,candidates:[{candidate:{name:"Lina Limone",female:!0,diverse:!1},yes:18,no:2},{candidate:{name:"Manfred Mango",female:!1,diverse:!1},yes:12,no:1},{candidate:{name:"Olivia Orange",female:!0,diverse:!0},yes:9,no:0},{candidate:{name:"Penelope Pineapple",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Wally Walnut",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Peer Pear",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Daniel Dattel",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Wilhelm Weintraube",female:!1,diverse:!0},yes:10,no:0},{candidate:{name:"Ronja Rosine",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Gunter Gurke",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Thorsten Tomate",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Erika Erbse",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Marlene Mais",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Antje Ananas",female:!0,diverse:!1},yes:10,no:0}]},{name:"Schatzmeister*in",count:1,candidates:[{candidate:{name:"Lina Limone",female:!0,diverse:!1},yes:18,no:2},{candidate:{name:"Manfred Mango",female:!1,diverse:!1},yes:12,no:1},{candidate:{name:"Olivia Orange",female:!0,diverse:!0},yes:9,no:0},{candidate:{name:"Penelope Pineapple",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Wally Walnut",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Peer Pear",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Daniel Dattel",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Wilhelm Weintraube",female:!1,diverse:!0},yes:10,no:0},{candidate:{name:"Ronja Rosine",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Gunter Gurke",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Thorsten Tomate",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Erika Erbse",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Marlene Mais",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Antje Ananas",female:!0,diverse:!1},yes:10,no:0}]},{name:"weitere Mitglieder",count:4,countVariable:!0,overall:!0,joint:!0,candidates:[{candidate:{name:"Lina Limone",female:!0,diverse:!1},yes:18,no:2},{candidate:{name:"Manfred Mango",female:!1,diverse:!1},yes:12,no:1},{candidate:{name:"Olivia Orange",female:!0,diverse:!0},yes:9,no:0},{candidate:{name:"Penelope Pineapple",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Wally Walnut",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Peer Pear",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Daniel Dattel",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Wilhelm Weintraube",female:!1,diverse:!0},yes:10,no:0},{candidate:{name:"Ronja Rosine",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Gunter Gurke",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Thorsten Tomate",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Erika Erbse",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Marlene Mais",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Antje Ananas",female:!0,diverse:!1},yes:10,no:0}]}],Schiedsgericht:[{name:"Richter*innen",count:3,joint:!0,candidates:[{candidate:{name:"Lina Limone",female:!0,diverse:!1},yes:18,no:2},{candidate:{name:"Manfred Mango",female:!1,diverse:!1},yes:12,no:1},{candidate:{name:"Olivia Orange",female:!0,diverse:!0},yes:9,no:0},{candidate:{name:"Penelope Pineapple",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Wally Walnut",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Peer Pear",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Daniel Dattel",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Wilhelm Weintraube",female:!1,diverse:!0},yes:10,no:0},{candidate:{name:"Ronja Rosine",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Gunter Gurke",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Thorsten Tomate",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Erika Erbse",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Marlene Mais",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Antje Ananas",female:!0,diverse:!1},yes:10,no:0}]},{name:"Ersatzrichter*innen",count:2,joint:!0,overall:!0,candidates:[{candidate:{name:"Lina Limone",female:!0,diverse:!1},yes:18,no:2},{candidate:{name:"Manfred Mango",female:!1,diverse:!1},yes:12,no:1},{candidate:{name:"Olivia Orange",female:!0,diverse:!0},yes:9,no:0},{candidate:{name:"Penelope Pineapple",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Wally Walnut",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Peer Pear",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Daniel Dattel",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Wilhelm Weintraube",female:!1,diverse:!0},yes:10,no:0},{candidate:{name:"Ronja Rosine",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Gunter Gurke",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Thorsten Tomate",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Erika Erbse",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Marlene Mais",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Antje Ananas",female:!0,diverse:!1},yes:10,no:0}]}]}:4==r&&(o={Vorstand:[{name:"Vorsitzende",count:2,joint:!0,candidates:[{candidate:{name:"Lina Limone",female:!0,diverse:!1},yes:18,no:2},{candidate:{name:"Manfred Mango",female:!1,diverse:!1},yes:12,no:1},{candidate:{name:"Olivia Orange",female:!0,diverse:!0},yes:9,no:0},{candidate:{name:"Penelope Pineapple",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Wally Walnut",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Peer Pear",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Daniel Dattel",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Wilhelm Weintraube",female:!1,diverse:!0},yes:10,no:0},{candidate:{name:"Ronja Rosine",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Gunter Gurke",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Thorsten Tomate",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Erika Erbse",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Marlene Mais",female:!0,diverse:!1},yes:10,no:0},{candidate:{name:"Antje Ananas",female:!0,diverse:!1},yes:10,no:0}]}]});s=1253723019,console.log("seeed: "+s);var s;for(var l of Object.values(o))for(var d of l)for(var c of d.candidates)c.yes=Math.floor(50*Math.random()),c.no=Math.floor(30*Math.random()),c.candidate.female=Math.random()<.5,c.candidate.diverse=Math.random()<.25;var f=void 0!==o?e.extend({},a,o):e.extend({},a),u='[data-tg="election-step-',m='[data-fn="election-step-form-',v='[data-fn="election-step-select-',g='[data-tg="election-item-template-',p='[data-tg="election-item-append-',h="data-g-tg",y="election-item",_="data-item-id",b='[data-tg="election-subitem-template-',S='[data-g-tg="election-subitem-append-',C="data-g-tg",E="election-subitem",x="data-subitem-id",$="data-confirm-delete",w=[],k=[],O="name";w[0]={check:{selector:'[id^="election-check-"]',value:"true",name:"election_"}},k[0]={count:{selector:'[id^="election-count-"]',value:"",name:"count_"},joint:{selector:'[id^="election-joint-"]',value:"true",name:"joint_",saveAs:"joint"}},k[1]={name:{selector:'[id^="name-"]',value:"",name:"name_",confirmSubitemDelete:!0,saveAs:"name"},female:{selector:'[id^="female-check-"]',value:"true",name:"female_",saveAs:"female"},diverse:{selector:'[id^="diverse-check-"]',value:"true",name:"diverse_",saveAs:"diverse"}},k[2]={yes:{selector:'[id^="votes-yes-"]',value:"",name:"yes_",saveAs:"yes"},no:{selector:'[id^="votes-no-"]',value:"",name:"no_",saveAs:"no"}};var V='<option value="-1" selected>Alle</option>';e.fn._replaceTemplatePlaceholders=function(t){var n=e(this);if(n.length>0){for(var a=0;a<t.length;a++){var i="{{ "+t[a][0]+" }}",o=new RegExp(i,"g");n.html(n.html().replace(o,t[a][1]))}return n}},_checkElectionConfigCandidatesOrVotes=function(e,t,n){var a=Object.keys(f)[e];if(!a||void 0===t)return!1;console.log("key: "+a+" – i: "+t+" – j: "+n);_validCandidatesOrVotes=function(e){var t=!1,n=!1;if(void 0!==e){for(var a=0;a<e.length;a++)void 0===e[a].candidate&&(t=!0),void 0!==e[a].yes&&void 0!==e[a].no||(n=!0);return[!t,!n]}return[!1,!1]};var i;void 0!==f[a]&&void 0!==f[a][t]&&void 0!==f[a][t].candidates&&f[a][t].candidates.length>0&&(void 0===n?void 0!==f[a][t].candidates[0]&&(i=f[a][t].candidates):void 0!==f[a][t].candidates[n]&&f[a][t].candidates[n].length>0&&(i=f[a][t].candidates[n]));var o=_validCandidatesOrVotes(i);return[o[0],o[1]]};_validateItems=function(){console.log("_validateItems()");for(var e in f){Object.keys(f).indexOf(e);for(var t=0;t<f[e].length;t++)if(void 0!==f[e]&&void 0!==f[e][t]&&void 0!==f[e][t].candidates&&void 0!==f[e][t].candidates[0])if(void 0!==f[e][t].candidates[0].candidate)console.log("joint, has candidate");else if(void 0!==f[e][t].candidates[0][0]&&void 0!==f[e][t].candidates[0][0].candidate)for(var n=0;n<f[e][t].candidates.length;n++)console.log("single"),void 0!==f[e][t].candidates[n][0]&&void 0!==f[e][t].candidates[n][0].candidate?console.log(n+" has candidate"):console.log(n+" has no candidate");else console.log("has no candidates 2");else console.log("has no candidates 1")}},e.fn._addSublistItems=function(n,a,i,o,r){var s=n||1,l=a,d=i,c=o,f=void 0!==c&&r?r[c]:r,u=e(this),m=t.$targetElems.filter(b+1+'"]'),v=u.find(S+1+'"]'),g=u.find("["+x+"]").last(),p=0;g.length>0&&(p=parseInt(g.attr(x))+1);for(var h=0;h<s;h++){var y=p+h,w=m.clone();w._replaceTemplatePlaceholders([["itemIndex",l],["subitemgroupIndex",d],["subitemIndex",void 0!==c?c+"-"+y:y]]).removeAttr("style data-tg").attr(C,E).attr(x,y).show().find('[data-g-fn="election-subitem-remove"]').on("click",function(t){t.preventDefault();var n=e(this).closest("["+C+'="'+E+'"]'),a=n.find("input["+$+"]");if(a.length>0){var i=!1;a.each(function(){""!=(T=e(this)).val()&&(i=!0,T.addClass("is-invalid").on("focus",function(){e(this).removeClass("is-invalid")}))}),i||n.remove()}else n.remove()});for(var V in k[1]){var T=w.find(k[1][V].selector),I=u.attr(_);T.length>0&&(T.attr(O,k[1][V].name+I+"_"+y).attr("value",k[1][V].value),k[1][V].confirmSubitemDelete&&T.attr($,""))}for(var V in k[2]){T=w.find(k[2][V].selector),I=u.attr(_);T.length>0&&(T.attr(O,k[2][V].name+I+"_"+y).attr("value",k[2][V].value),k[2][V].confirmSubitemDelete&&T.attr($,""))}f&&f[h]&&f[h].candidate&&(f[h].candidate.name&&""!=f[h].candidate.name&&w.find('input[name^="name"]').val(f[h].candidate.name),f[h].candidate.female&&w.find('input[name^="female"]').attr("checked",""),f[h].candidate.diverse&&w.find('input[name^="diverse"]').attr("checked",""),void 0!==f[0].yes&&w.find('input[name^="yes"]').val(f[h].yes),void 0!==f[0].no&&w.find('input[name^="no"]').val(f[h].no)),w.appendTo(v)}},e.fn._validateNumberInput=function(){var t=e(this),n=t.find('[data-g-fn="validate"]');if(n.length>0){var a=t.find(n.attr("data-g-tg"));n.on("change keyup",function(){var t=e(this),n=parseInt(t.attr("min")),i=parseInt(t.attr("max")),o=t.val();console.log("min: "+n+" – max: "+i),"NaN"==typeof n&&"NaN"==typeof man||""==o||("NaN"!=typeof n&&o<n?t.val(n):"NaN"!=typeof man&&o>i&&t.val(i)),a.length>0&&(o>1?a.show():a.hide())})}},e.fn._getFormValues=function(t){var n=e(this),a={},i=t||"name";return n.find("input["+i+"], select["+i+"], textarea["+i+"]").each(function(t,n){var o=e(n);"radio"==o.attr("type")?o.is(":checked")&&(a[o.attr(i)]=o.val()):"checkbox"==o.attr("type")?a[o.attr(i)]=o.is(":checked")?o.val():null:a[o.attr(i)]=o.val()}),a},_filterMatchingIndexes=function(e,t){for(var n=[],a=0;a<e.length;a++)0===e[a].indexOf(t)&&n.push(e[a]);return n},_getElectionResult=function(){var e=!1;for(var t in f){for(var a={structure:[],current:"",previous:[],candidates:[]},o=["name","count","joint","overall"],r=0;r<f[t].length;r++){a.structure.push({});for(var s=0;s<o.length;s++)void 0!==f[t][r][o[s]]&&(a.structure[r][o[s]]=f[t][r][o[s]])}for(r=0;r<f[t].length;r++){_setPrevious=function(){if(0===r)a.previous=[];else{var e=r-1;if(void 0!==f[t][e].results&&void 0!==f[t][e].results.candidates&&f[t][e].results.candidates.length>0)for(var n=0;n<f[t][e].results.candidates.length;n++)a.previous.push(f[t][e].results.candidates[n])}};var l=!1,d=!1;if(void 0!==f[t][r]&&void 0!==f[t][r].candidates&&f[t][r].candidates.length>0&&void 0!==f[t][r].candidates[0].candidate){for(s=0;s<f[t][r].candidates.length;s++)void 0!==f[t][r].candidates[s].yes&&void 0!==f[t][r].candidates[s].no?"0"==f[t][r].candidates[s].yes&&"0"==f[t][r].candidates[s].no||(l=!0):d=!0;if(l&&!d){a.current=f[t][r].name,_setPrevious(),a.candidates=f[t][r].candidates;if(void 0!==(u=n.getResult(a)).error)return e=!0,I(u.error),!1;f[t][r].results=u}}else if(void 0!==f[t][r]&&void 0!==f[t][r].candidates&&f[t][r].candidates.length>0&&void 0===f[t][r].candidates[0].candidate&&f[t][r].candidates[0].length>0&&void 0!==f[t][r].candidates[0][0].candidate){_setPrevious();for(var c=0;c<f[t][r].candidates.length;c++){for(s=0;s<f[t][r].candidates[c].length;s++)void 0!==f[t][r].candidates[c][s].yes&&void 0!==f[t][r].candidates[c][s].no?"0"==f[t][r].candidates[c][s].yes&&"0"==f[t][r].candidates[c][s].no||(l=!0):d=!0;if(l&&!d){a.current=[f[t][r].name,c],0===c&&(f[t][r].results={candidates:[],explanation:[]}),a.candidates=f[t][r].candidates[c];var u;void 0!==(u=n.getResult(a)).error?(e=!0,I(u.error)):(f[t][r].results.candidates.push(u.candidates[0]),a.previous.push(u.candidates[0]))}}}}}return u&&localStorage.setItem(i,JSON.stringify(f)),!e},e.fn._getElectionCurrentConfig_0=function(){f=void 0!==o?e.extend({},a,o):e.extend({},a);var t=e(this)._getFormValues(O),n=[];for(var r in f){var s=Object.keys(f).indexOf(r);if(null===t[w[0].check.name+s])n.push(r);else for(var l=0;l<f[r].length;l++){var d=t[k[0].count.name+s+"_"+l];d&&(d=parseInt(d));var c=t[k[0].joint.name+s+"_"+l];c&&(c=JSON.parse(c)),null!=d?f[r][l].count=d:d=f[r][l].count,null!=c?f[r][l].joint=!0:d>1&&(f[r][l].joint=!1),d>1&&!c?void 0!==f[r][l].candidates&&void 0!==f[r][l].candidates[0]&&void 0!==f[r][l].candidates[0].candidate&&delete f[r][l].candidates:void 0!==f[r][l].candidates&&void 0!==f[r][l].candidates[0]&&void 0!==f[r][l].candidates[0][0]&&void 0!==f[r][l].candidates[0][0].candidate&&delete f[r][l].candidates}}for(var u=0;u<n.length;u++)delete f[n[u]];localStorage.setItem(i,JSON.stringify(f))},e.fn._getElectionCurrentConfig_1=function(){var t=e(this);_isValidCandidate=function(e){return void 0!==n[e]&&null!==n[e]&&""!==n[e]},_getCandidate=function(e){var t=n[e],a=n[e.replace(m,v)]||!1,i=n[e.replace(m,g)]||!1;return{[k[1].name.saveAs]:t,[k[1].female.saveAs]:a,[k[1].diverse.saveAs]:i}};var n=t._getFormValues(O);for(var a in f)for(var o=Object.keys(f).indexOf(a),r=0;r<f[a].length;r++){f[a][r].candidates=[];f[a][r].name;var s,l,d=parseInt(f[a][r].count),c=f[a][r].joint,u=Object.keys(n),m=k[1].name.name,v=k[1].female.name,g=k[1].diverse.name,p=k[2].yes.name,h=k[2].no.name;if(1===d||!0===c){t.find("["+_+'="'+o+"_"+r+'"]').find("["+x+"]");s=o+"_"+r+"_",l=_filterMatchingIndexes(u,m+s);for(var y=0,b=0;b<l.length;b++)if(_isValidCandidate(l[b])){var S=_getCandidate(l[b]),C=n[l[b].replace(m,p)]||!1,E=n[l[b].replace(m,h)]||!1;void 0===f[a][r].candidates&&(f[a][r].candidates=[]),void 0===f[a][r].candidates[b-y]&&(f[a][r].candidates[b-y]={}),f[a][r].candidates[b-y].candidate=S,C&&(f[a][r].candidates[b-y].yes=C),E&&(f[a][r].candidates[b-y].no=E)}else y++}else for(var $=0;$<d;$++){s=o+"_"+r+"_"+$+"_",l=_filterMatchingIndexes(u,m+s),f[a][r].candidates[$]=[];for(y=0,b=0;b<l.length;b++)if(_isValidCandidate(l[b])){S=_getCandidate(l[b]),C=n[l[b].replace(m,p)]||!1,E=n[l[b].replace(m,h)]||!1;void 0===f[a][r].candidates[$][b-y]&&(f[a][r].candidates[$][b-y]={}),f[a][r].candidates[$][b-y].candidate=S,C&&(f[a][r].candidates[$][b-y].yes=C),E&&(f[a][r].candidates[$][b-y].no=E)}else y++}}localStorage.setItem(i,JSON.stringify(f))},e.fn._getElectionCurrentConfig_2=function(){var t=e(this),n=t._getFormValues(O);for(var a in f)for(var o=Object.keys(f).indexOf(a),r=0;r<f[a].length;r++){f[a][r].name;var s,l,d=parseInt(f[a][r].count),c=f[a][r].joint,u=Object.keys(n),m=k[2].yes.name,v=k[2].no.name;if(1===d||!0===c){t.find("["+_+'="'+o+"_"+r+'"]').find("["+x+"]");s=o+"_"+r+"_",l=_filterMatchingIndexes(u,m+s);for(var g=0;g<l.length;g++){var p=n[l[g]]||0,h=n[l[g].replace(m,v)]||0;f[a][r].candidates[g].yes=p,f[a][r].candidates[g].no=h}}else for(var y=0;y<d;y++){s=o+"_"+r+"_"+y+"_",l=_filterMatchingIndexes(u,m+s);for(g=0;g<l.length;g++){p=n[l[g]]||0,h=n[l[g].replace(m,v)]||0;f[a][r].candidates[y][g].yes=p,f[a][r].candidates[y][g].no=h}}}localStorage.setItem(i,JSON.stringify(f))},_buildStep_3=function(){var e=t.$targetElems.filter(g+3+'"]'),n=t.$targetElems.filter(p+3+'"]'),a=t.$targetElems.filter('[data-tg="election-subitemgroup-template-3"]'),i=t.$targetElems.filter(b+3+'"]');n.empty();for(var o in f){var r=Object.keys(f).indexOf(o),s=o,l=e.clone();l.removeAttr("data-tg style")._replaceTemplatePlaceholders([["title",s],["index",r]]);for(var d=l.find('[data-g-tg="election-subitemgroup-append-3"]'),c=0;c<f[o].length;c++){var m=f[o][c].name,v=a.clone();if(v._replaceTemplatePlaceholders([["index",c],["title",m]]).removeAttr("style data-tg").show(),void 0!==f[o][c].results&&void 0!==f[o][c].results.candidates&&f[o][c].results.candidates.length>0)for(var h=v.find(S+3+'"]'),y=0;y<f[o][c].results.candidates.length;y++){var _=i.clone(),C=f[o][c].results.candidates[y].candidate.name||"";_._replaceTemplatePlaceholders([["candidateName",C]]).removeAttr("style data-tg").show(),0==y&&""!=C&&h.empty(),""!=C&&_.appendTo(h)}if(void 0!==f[o][c].results&&void 0!==f[o][c].results.explanation&&f[o][c].results.explanation.length>0){console.log("explanation found");for(var E=t.$targetElems.filter('[data-tg="explanation-template"]'),x=v.find('[data-g-tg="explanation-template-append"]'),$=(t.$targetElems.filter('[data-g-tg="explanation-subitem-text"]'),t.$targetElems.filter('[data-g-tg="explanation-subitem-list"]'),f[o][c].results.explanation),w=0;w<$.length;w++){console.log("explanation j: "+w);var k=E.clone();k._replaceTemplatePlaceholders([["headline",$[w].headline]]).removeAttr("style data-tg").show();var O=k.find('[data-g-tg="explanation-item-append"]');for(y=0;y<$[w].content.length;y++){console.log("explanation["+w+"] k: "+y);var V=$[w].content[y],T=t.$targetElems.filter('[data-tg="explanation-item-'+V.type+'"]').clone();T._replaceTemplatePlaceholders([["itemHeadline",V.headline]]).removeAttr("style data-tg").show();for(var I=T.find('[data-g-tg="explanation-subitem-append"]'),M=V.items,D=0;D<M.length;D++){console.log("subitem["+D+"].item: "+M[D].item);var A=t.$targetElems.filter('[data-tg="explanation-subitem-'+V.type+'"]').clone();if(A._replaceTemplatePlaceholders([["subitemContent",M[D].item]]).removeAttr("style data-tg").show(),!M[D].selected){var j=A.attr("data-selected-class");A.addClass(j)}A.appendTo(I)}T.appendTo(O)}k.appendTo(x)}}v.appendTo(d)}l.appendTo(n),t.$targetElems.filter(u+3+'"]').show()}},_buildStep_2=function(){var n=t.$functionElems.filter(m+2+'"]'),a=t.$targetElems.filter(g+2+'"]'),i=t.$targetElems.filter(p+2+'"]'),o=t.$targetElems.filter(b+2+'"]');i.empty(),T.$select[2].empty().append(V);for(var r in f)for(var s=Object.keys(f).indexOf(r),l=r,d=0;d<f[r].length;d++){var c,u=f[r][d].name,v=parseInt(f[r][d].count),$=f[r][d].joint,w=f[r][d].candidates;if(_cloneStep_2=function(e){var t=a.clone(),n=e;T.$select[2].append('<option value="'+s+"_"+d+(void 0!==n?"_"+n:"")+'">'+c+"</option>"),t.removeAttr("data-tg style").attr(h,y).attr(_,void 0!==n?s+"_"+d+"_"+n:s+"_"+d)._replaceTemplatePlaceholders([["title",c]]);var r;r=void 0!==n&&void 0!==w&&void 0!==w[n]&&w[n].length>0?w[n].length:void 0===n&&void 0!==w&&void 0!==w[0]&&void 0!==w[0].candidate&&w.length>0?w.length:0;for(var l=void 0!==n&&w?w[n]:w,f=t.find(S+2+'"]'),u=0;u<r;u++){var m=o.clone(),v=l[u].candidate.name||"";m._replaceTemplatePlaceholders([["candidateName",v],["itemIndex",s],["subitemgroupIndex",d],["subitemIndex",void 0!==n?n+"-"+u:u]]).removeAttr("style data-tg").attr(C,E).attr(x,u).show()._validateNumberInput();for(var g in k[2]){var p=m.find(k[2][g].selector),b=t.attr(_);p.length>0&&p.attr(O,k[2][g].name+b+"_"+u).attr("value",k[2][g].value)}l&&l[u]&&l[u].candidate&&(void 0!==l[u].yes&&m.find('input[name^="yes"]').val(l[u].yes),void 0!==l[u].no&&m.find('input[name^="no"]').val(l[u].no)),m.appendTo(f)}t.appendTo(i)},1==v)c=l+" » "+u,_cloneStep_2();else if($)c=l+" » "+u+" (gemeinsam "+v+")",_cloneStep_2();else for(var I=0;I<v;I++)c=l+" » "+u+" » "+(I+1)+"&thinsp;/&thinsp;"+v,_cloneStep_2(I)}$CalculateElectionButton=t.$functionElems.filter('[data-fn="calculate-election"]'),$CalculateElectionButton.off("click.calculate").on("click.calculate",function(e){e.preventDefault();t.$functionElems.filter(m+2+'"]')._getElectionCurrentConfig_2(),_getElectionResult()&&_buildStep_3()}),n.off("submit.form.2").on("submit.form.2",function(t){t.preventDefault();var n=e(this);n._getElectionCurrentConfig_2(),_getElectionResult()&&(_buildStep_3(),n.trigger("built"))})},_buildStep_1=function(){var n=t.$functionElems.filter(m+1+'"]'),a=t.$targetElems.filter(g+1+'"]'),i=t.$targetElems.filter(p+1+'"]');t.$targetElems.filter(b+1+'"]');i.empty(),T.$select[1].empty().append(V);for(var o in f)for(var r=Object.keys(f).indexOf(o),s=o,l=0;l<f[o].length;l++){var d,c=f[o][l].name,u=parseInt(f[o][l].count),v=f[o][l].joint,S=f[o][l].candidates;if(_cloneStep_1=function(t){var n=a.clone(),o=t;T.$select[1].append('<option value="'+r+"_"+l+(void 0!==o?"_"+o:"")+'">'+d+"</option>"),n.removeAttr("data-tg style").attr(h,y).attr(_,void 0!==o?r+"_"+l+"_"+o:r+"_"+l)._replaceTemplatePlaceholders([["title",d],["index",r]]);var s;s=void 0!==o&&void 0!==S&&void 0!==S[o]&&S[o].length>0?S[o].length:void 0===o&&void 0!==S&&void 0!==S[0]&&void 0!==S[0].candidate&&S.length>0?S.length:1!=u&&v?u+3:4,n._addSublistItems(s,r,l,o,S),n.find('[data-g-fn="add-subitems"]').on("click",function(t){t.preventDefault();var n=e(this).closest("["+h+'="'+y+'"]'),a=n.find('[data-g-tg="add-subitems-count"]').val();n._addSublistItems(a,r,l,o)}),n.appendTo(i)},1==u)d=s+" » "+c,_cloneStep_1();else if(v)d=s+" » "+c+" (gemeinsam "+u+")",_cloneStep_1();else for(var C=0;C<u;C++)d=s+" » "+c+" » "+(C+1)+"&thinsp;/&thinsp;"+u,_cloneStep_1(C)}n.off("submit.form.1").on("submit.form.1",function(t){t.preventDefault();var n=e(this);n._getElectionCurrentConfig_1(),_buildStep_2(),n.trigger("built")})},_buildStep_0=function(){var n=t.$functionElems.filter(m+0+'"]'),i=t.$targetElems.filter(g+0+'"]'),r=t.$targetElems.filter(p+0+'"]'),s=t.$targetElems.filter(b+0+'"]');r.empty();for(var l in a){var d=Object.keys(a).indexOf(l),c=i.clone();c.removeAttr("data-tg style").attr(h,y).attr(_,d)._replaceTemplatePlaceholders([["title",l],["index",d]]);for(var u in w[0]){($=c.find(w[0][u].selector)).length>0&&($.attr(O,w[0][u].name+d).attr("value",w[0][u].value),void 0!==o&&o[l]&&$.attr("checked",""))}for(var v=c.find(S+0+'"]'),C=0;C<a[l].length;C++){var E=C,x=s.clone();a[l][C].countVariable?void 0!==f[l]&&void 0!==f[l][C]&&!f[l][C].count>1&&x.find('[data-tp-o="3"]').hide():Number.isInteger(a[l][C].count)&&a[l][C].count>1||x.find('[data-tp-o="3"]').remove(),a[l][C].countVariable?x.find('[data-tp-o="1"]').remove():x.find('[data-tp-o="2"]').remove(),x.removeAttr("data-tg style")._replaceTemplatePlaceholders([["electionItemType",a[l][C].name],["electionItemCount",a[l][C].count],["itemIndex",d],["index",E]])._validateNumberInput();for(var u in k[0]){var $;($=x.find(k[0][u].selector)).length>0&&($.attr(O,k[0][u].name+d+"_"+E).attr("value",k[0][u].value),$.is('[name^="count"]')&&f[l]&&f[l][C]&&!0===f[l][C].countVariable&&f[l][C].count>0&&$.attr("value",f[l][C].count),$.is('[type="checkbox"]')&&f[l]&&f[l][C]&&f[l][C].joint===JSON.parse(k[0].joint.value)&&$.attr("checked",""))}x.appendTo(v)}c.appendTo(r).checkSlideToggle({triggerSelector:'[data-g-fn="accordion-trigger"]'})}n.off("submit.form.0").on("submit.form.0",function(t){t.preventDefault();var n=e(this);n._getElectionCurrentConfig_0(),_buildStep_1(),n.trigger("built")})};var T={steps:3,currentStep:0,previousStep:null,$electionStep:[],$stepPrev:[],$stepNext:[],$select:[],selectValues:[],currentSelectValue:[],currentItemCoordinates:null,electionDoingSelectValue:null};T._getSelectValues=function(t){var n=[];return e(t).find("option").each(function(){n.push(e(this).val())}),n},T._setItem=function(e,t,n){var a=void 0===t?T.currentStep:t;if(T.currentSelectValue[a]=e,console.log("_Nav._setItem (step: "+a+") to: "+e),T.$select[a].find('option[value="'+e+'"]').removeAttr("disabled"),T.$select[a].val(e).trigger("change"),void 0!==n)for(var i=0;i<n.length;i++)T.$select[a].find('option[value="'+n[i]+'"]').removeAttr("disabled").attr("disabled","")},T._gotoStep=function(e,n){console.log("begin nav goto "+e),T.previousStep=T.currentStep,T.currentStep=e,console.log("GOTO: "+T.currentStep+" FROM: "+T.previousStep);for(var a=0;a<T.steps;a++)a!==T.currentStep?T.$electionStep[a].hide():T.$electionStep[a].show();if(1==T.currentStep&&(T.selectValues=T._getSelectValues(T.$select[T.currentStep])),0==T.currentStep&&(T.electionDoingSelectValue=null),T.currentStep>0&&(T.currentSelectValue[T.currentStep]=T.$select[T.currentStep].val(),console.log("_Nav.currentSelectValue[ "+T.currentStep+" ]: "+T.currentSelectValue[T.currentStep])),1==T.currentStep){if(_showMissingElectionsDialog=function(){t.$targetElems.filter('[data-tg="confirm-modal"]')._confirmModal({header:"Hinweis",headerClass:"modal-title",body:"Bitte wähle mindestens eine Wahl aus.",confirmButtonHide:!0,dismissButtonClass:"btn btn-primary",dismissButtonIconClass:"fa fa-check",dismissButtonText:"Ok"})},T.previousStep<T.currentStep&&(console.log("going forward: "+typeof f),"{}"===JSON.stringify(f)))return _showMissingElectionsDialog(),T._gotoStep(0),!1;T.previousStep>T.currentStep&&"-1"!=T.currentSelectValue[T.currentStep]&&T._setItem(T.currentSelectValue[T.currentStep+1])}if(2==T.currentStep){if(_checkForCandidates=function(e){if(void 0!==e){var t=e.split("_");return _checkElectionConfigCandidatesOrVotes(t[0],t[1],t[2])[0]}return!1},_showMissingCandidatesDialog=function(){t.$targetElems.filter('[data-tg="confirm-modal"]')._confirmModal({header:"Hinweis",headerClass:"modal-title",body:"Bitte Kandidaten hinzufügen.",confirmButtonHide:!0,dismissButtonClass:"btn btn-primary",dismissButtonIconClass:"fa fa-check",dismissButtonText:"Ok"})},_increaseSelectValue=function(e,t){return T.electionDoingSelectValue=e,console.log("_Nav.electionDoingSelectValue: "+T.electionDoingSelectValue),T.currentSelectValue[T.currentStep]=e,console.log("_increaseSelectValue: "+e),_checkForCandidates(e)?(console.log("valid"),T._setItem(e,void 0,t),!0):(console.log("candidates missing, go back"),_showMissingCandidatesDialog(),T._gotoStep(1,e),!1)},_getDisableOptionsList=function(e){var t=void 0!==e?e:[],n=null!==T.electionDoingSelectValue?T.selectValues.indexOf(T.electionDoingSelectValue)+1:e.length+1;console.log("DISABLE:");for(var a=n;a<T.selectValues.length;a++)console.log(a+": "+T.selectValues[a]),t.push(T.selectValues[a]);return t},console.log("CHECK IF SET SELECT"),T.previousStep!=T.currentStep)if(console.log(T.previousStep+" != "+T.currentStep),"-1"==T.currentSelectValue[T.currentStep]&&null===T.electionDoingSelectValue){console.log("increase & check");var i=T.selectValues[T.selectValues.indexOf("-1")+1],o=T.electionDoingSelectValue!=T.selectValues[T.selectValues.length-1]?_getDisableOptionsList(["-1"]):void 0;if(!_increaseSelectValue(i,o))return!1}else{console.log("adapting value to doing");i=T.electionDoingSelectValue,o=T.electionDoingSelectValue!=T.selectValues[T.selectValues.length-1]?_getDisableOptionsList(["-1"]):void 0;if(!_checkForCandidates(i)){if(console.log("candidates missing but not first, goint to latest valid election"),T.selectValues.indexOf(T.electionDoingSelectValue)-1>0){i=T.selectValues[T.selectValues.indexOf(T.electionDoingSelectValue)-1];T.electionDoingSelectValue=i;o=T.electionDoingSelectValue!=T.selectValues[T.selectValues.length-1]?_getDisableOptionsList(["-1"]):void 0;return T._setItem(i,void 0,o),!0}return _showMissingCandidatesDialog(),T._gotoStep(1,i),!1}T._setItem(i,void 0,o)}if(T.previousStep==T.currentStep)if(console.log(T.previousStep+" == "+T.currentStep),T.selectValues.indexOf(T.currentSelectValue[T.currentStep])+1<T.selectValues.length){console.log("increase & check");i=T.selectValues[T.selectValues.indexOf(T.currentSelectValue[T.currentStep])+1];if(!_increaseSelectValue(i,o))return!1}else{t.$targetElems.filter('[data-tg="confirm-modal"]')._confirmModal({header:"Fertig",headerClass:"modal-title text-success",body:'<p>Es wurden alle Wahlgänge durchgeführt.<p><p class="mb-0">Falls irgendwo Korrekturen nötig sein sollten, einfach zurück gehen, korrigieren und Wahlen fortsetzen bis zu dieser Meldung.</p>',confirmButtonHide:!0,dismissButtonClass:"btn btn-success",dismissButtonIconClass:"fa fa-check",dismissButtonText:"Ok"}),T.$select[T.currentStep].find("option[disabled]").removeAttr("disabled")}}T._toTop(),void 0!==n&&void 0!==T.$select[T.currentStep]&&T.selectValues.indexOf(n)>=0&&T._setItem(n),console.log("end nav goto "+T.currentStep)},T._prev=function(e){var t=T.currentStep>0?T.currentStep-1:0;T._gotoStep(t,e),T._toTop(),console.log("nav prev "+T.currentStep)},T._next=function(e){var t=T.currentStep<T.steps-1?T.currentStep+1:T.steps-1;T._gotoStep(t,e),T._toTop(),console.log("nav next "+T.currentStep)},T._toTop=function(){t.$functionElems.filter('[data-fn="to-top-wrapper"]').children("a").trigger("click")},T._init=function(){for(var n=0;n<T.steps;n++)T.$electionStep[n]=t.$targetElems.filter(u+n+'"]'),n>0&&(T.$stepPrev[n]=t.$functionElems.filter('[data-fn="election-back-'+n+'"]'),T.$stepPrev[n].on("click",function(e){e.preventDefault(),T._prev()})),n<T.steps&&(T.$stepNext[n]=t.$functionElems.filter(m+n+'"]'),T.$stepNext[n].on("built",function(){T._next()})),n>0&&t.$functionElems.filter(v+n+'"]').length>0&&(T.$select[n]=t.$functionElems.filter(v+n+'"]'),T.currentSelectValue[n]=T.$select[n].val(),console.log("_Nav.currentSelectValue[ "+n+" ]: "+T.currentSelectValue[n]),T.$select[n].on("change",function(){var n=e(this).val(),a=e(this).closest("form"),i=a.find(t.$targetElems.filter('[data-tg="hide-last-item"]'));T.currentSelectValue[T.currentStep]=n,n&&(T.currentItemCoordinates=n.split("_")),console.log("doing select change to: "+n+" – _Nav.currentSelectValue[ "+T.currentStep+" ]: "+(null!=T.currentSelectValue?T.currentSelectValue[T.currentStep]:void 0)+" – _Nav.currentItemCoordinates: "+T.currentItemCoordinates[0]+" "+T.currentItemCoordinates[1]+" "+T.currentItemCoordinates[2]),-1!=n?(a.find("["+_+"]").hide(),a.find("["+_+'^="'+n+'"]').show(),n!=T.selectValues[T.selectValues.length-1]?i.show():i.hide()):(T.currentItemCoordinates=null,a.find("["+_+"]").show(),i.hide())})),1==n&&t.$functionElems.filter('[data-fn="election-next-item"]')&&($nextItemButton=t.$functionElems.filter('[data-fn="election-next-item"]'),$nextItemButton.on("click",function(e){e.preventDefault();var t=T.$select[T.currentStep].val(),a=T.selectValues[T.selectValues.indexOf(t)+1];T.$select[T.currentStep].val(a).trigger("change"),T.currentSelectValue[n]=a,T.currentItemCoordinates=a.split("_"),T._toTop()}));T._gotoStep(T.currentStep)},T._reset=function(){T.currentStep=0,T.previousStep=null,T.selectValues=[],T.currentSelectValue=[],T.electionDoingSelectValue=null,T._gotoStep(T.currentStep)},_saveLocal=function(n){console.log("save");var a=e(n),o="bg-success text-white";t.$functionElems.filter(m+T.currentStep+'"]')["_getElectionCurrentConfig_"+T.currentStep](),localStorage.getItem(i)&&a.addClass(o).delay(300).queue(function(){e(this).removeClass(o).dequeue(),t.$functionElems.filter("#toggle-navbar-collapse").trigger("click")})},t.$functionElems.filter('[data-fn="config-save"]').on("click",function(){_saveLocal(this)}),_resetElection=function(n){localStorage.removeItem(i);var r=void 0!==n?e.extend({},n):e.extend({},a);o=void 0!==n?e.extend({},r):void 0,f=e.extend({},r),_buildStep_0(),T._reset(),t.$targetElems.filter(u+3+'"]').hide()},_downloadCurrentElectionConfig=function(){console.log("save step: "+T.currentStep);var n=T.currentStep<T.steps-1?T.currentStep:T.steps-2;if(t.$functionElems.filter(m+n+'"]')["_getElectionCurrentConfig_"+n](),void 0!==f){var a=t.$targetElems.filter('[data-tg="save-modal"]'),i=a.find('input[name="file_name"]'),o=a.filter(t.$functionElems.find('[data-fn="save-modal-confirm"]')),r=new Date,s=[r.getFullYear(),("00"+(r.getMonth()+1)).slice(-2),("00"+r.getDate()).slice(-2)].join("-")+"_"+[("00"+r.getHours()).slice(-2),("00"+r.getMinutes()).slice(-2),("00"+r.getSeconds()).slice(-2)].join("-");i.val("dib_wahl-checker_"+s).on("focus",function(){e(this).select()}),e.fn._addDownload=function(t){var n=e(this),a=JSON.stringify(f),o=new Blob([a],{type:"application/json"});n.attr("href",URL.createObjectURL(o)).attr("download",i.val()+".json")},a.on("shown.bs.modal",(i=e(i),(o=t.$functionElems.filter('[data-fn="save-modal-confirm"]'))._addDownload(),i.on("change",function(){o._addDownload()}),void setTimeout(function(){i.focus()},550))),o.on("click",function(){t.$targetElems.filter('[data-tg="save-modal"]').modal("hide")}),a.modal("show")}},t.$functionElems.filter('[data-fn="config-download"]').on("click",function(){t.$functionElems.filter("#toggle-navbar-collapse").trigger("click"),_downloadCurrentElectionConfig()}),_loadCurrentElectionConfig=function(){var e,n=t.$targetElems.filter('[data-tg="load-modal"]'),a=n.find("form"),i=a.find('input[name="file_name"]');n.modal("show"),i.on("change",function(t){var n=t.target.files;if(n&&n.length>0){var a=new FileReader;a.onload=(n[0],function(t){try{e=JSON.parse(t.target.result)}catch(e){I({message:"error trying to parse json: "+e})}}),a.readAsText(n[0])}}),a.one("submit",function(n){n.preventDefault(),void 0!==e&&(_resetElection(e),t.$targetElems.filter('[data-tg="load-modal"]').modal("hide"),i.val(""))})},t.$functionElems.filter('[data-fn="config-load"]').on("click",function(){t.$functionElems.filter("#toggle-navbar-collapse").trigger("click"),_loadCurrentElectionConfig()}),e.fn._confirmModal=function(t){t=e.extend({},{header:"Bitte bestätigen",headerClass:"modal-title",body:"Bitte bestätige die Aktion.",dismissButtonHide:!1,confirmButtonHide:!1,dismissButtonClass:"btn btn-default",confirmButtonClass:"btn btn-danger",dismissButtonIconClass:"fa fa-close",confirmButtonIconClass:"fa fa-check",dismissButtonText:"Abbrechen",confirmButtonText:"Ok",confirmCallback:null,dismissCallback:null},t);var n=e(this);n.find('[data-g-tg="modal-title"]').html(t.header).attr("class",t.headerClass),n.find('[data-g-tg="modal-body"]').html(t.body);var a=n.find('[data-g-fn="confirm-modal-confirm"]');t.confirmButtonHide?a.hide():(a.attr("class",t.confirmButtonClass).show(),a.find('[data-g-tg="btn-icon"]').attr("class",t.confirmButtonIconClass),a.find('[data-g-tg="btn-text"]').html(t.confirmButtonText));var i=n.find('[data-g-fn="confirm-modal-dismiss"]');t.dismissButtonHide?i.hide():(i.attr("class",t.dismissButtonClass).show(),i.find('[data-g-tg="btn-icon"]').attr("class",t.dismissButtonIconClass),i.find('[data-g-tg="btn-text"]').html(t.dismissButtonText)),n.modal("show"),t.confirmCallback&&a.one("click",function(){t.confirmCallback()}),t.dismissCallback&&n.one("hide.bs.modal",function(){t.dismissCallback()})},t.$functionElems.filter('[data-fn="config-delete"]').on("click",function(){t.$functionElems.filter("#toggle-navbar-collapse").trigger("click");t.$targetElems.filter('[data-tg="confirm-modal"]')._confirmModal({header:"Löschen bestätigen",headerClass:"modal-title text-danger",body:"Möchtest Du wirklich die gesamte Wahl zurücksetzen?",dismissButtonClass:"btn btn-default",confirmButtonClass:"btn btn-danger",dismissButtonIconClass:"fa fa-close",confirmButtonIconClass:"fa fa-trash",dismissButtonText:"Nein, doch nicht",confirmButtonText:"Zurücksetzen",confirmCallback:function(){_resetElection(),t.$targetElems.filter('[data-tg="confirm-modal"]').modal("hide")}})});function I(e){var n="Bei der Berechnung des Wahlergebnisses ist leider ein unbekannter Fehler aufgetreten.";e.message,n=e.message;t.$targetElems.filter('[data-tg="confirm-modal"]')._confirmModal({header:"Fehler",headerClass:"modal-title text-warning",body:n,confirmButtonHide:!0,dismissButtonClass:"btn btn-primary btn-warning",dismissButtonIconClass:"fa fa-check",dismissButtonText:"Ok"})}e.fn.dibElection=function(){_buildStep_0(),T._init()}}(jQuery,MY_UTILS,DIB_ELECTION_CALCULATOR),function(e,t){e.fn.dropdownMultilevel=function(n){var a={openedClass:t.classes.open,hasOpenedSublevelClass:"has-"+t.classes.open,animatingClass:t.classes.animating,closeElemSelector:'[data-fn="dropdown-multilevel-close"]',excludedBodyElements:'[data-tg="dropdown-multilevel-excluded"]',scrollDuration:100};n=e.extend({},a,n);var i=[],o=e(this),r=t.$targetElems.filter(n.excludedBodyElements);e.fn._getTarget=function(){var n,a=e(this);if(a.attr(t.attributes.target)){var i=a.attr(t.attributes.target);n=t.$targetElems.filter(i).lenght>0?t.$targetElems.filter(i):e(i)}else n=a.parent("li");return n},e.fn._getList=function(){var t=e(this);return t._getTarget().find('[aria-labelledby="'+t.attr("id")+'"]')},e.fn._getCloseElem=function(){return e(this)._getList().children().fist().find('[data-fn="dropdown-multilevel-close"]')},e.fn._getParentList=function(){return e(this)._getTarget().parent("ul")},e.fn._openDropdown=function(){var t=e(this),a=t._getTarget(),o=t._getParentList();a.addClass(n.openedClass).setRemoveAnimationClass(n.animatingClass),t.ariaExpanded("true"),o.animate({scrollTop:0},n.scrollDuration,function(){e(this).addClass(n.hasOpenedSublevelClass)}),i.push(t)},e.fn._closeDropdown=function(){var t=e(this),a=t._getTarget(),o=t._getParentList();a.removeClass(n.openedClass).setRemoveAnimationClass(n.animatingClass),t.ariaExpanded("false"),o.removeClass(n.hasOpenedSublevelClass),i.pop()};function s(){for(var t=i.length-1;t>=0;t--)e(i[t])._closeDropdown()}function l(a){t.$body.one("click.body",function(t){var o=e(t.target);if(a.length>0)if(-1==e.inArray(o[0],r)){var d=e(a[a.length-1])._getList();d.children().children(n.closeElemSelector).parent().has(o).length>0?(t.preventDefault(),e(a[a.length-1])._closeDropdown(),l(i)):d.has(o).length>0||d.is(o)?l(i):!d.has(o).length>0&&s()}else l(i)})}o.each(function(){var n=e(this),a=(n.attr(t.attributes.target),n._getTarget()),o=n._getList();n.on("click",function(r){if(a.length>0&&o.length>0){t.$body.off("click.body");var d=e(r.target),c=e(i[i.length-1]);if(c.has(d).length>0||c.is(d))r.preventDefault(),e(i[i.length-1])._closeDropdown(),i.length>0&&l(i);else if(o.is(":visible")&&o.elemPositionedInside(a.parent()))l(i);else{if(r.preventDefault(),i.length>0){!e(i[i.length-1])._getList().has(n).length>0&&s()}n._openDropdown();var f;(f=n.getOptionsFromAttr())&&f.focusOnOpen&&t.$targetElems.filter(f.focusOnOpen).focus(),r.stopPropagation(),l(i)}}})}),t.$window.on("orientationchange sizeChange",function(){s()})}}(jQuery,MY_UTILS),function(e,t){e.fn.remoteEvent=function(){e(this).each(function(){var n=e(this),a=n.attr(t.attributes.target)||"",i=t.$targetElems.filter(a).lenght>0?t.$targetElems.filter(a):e(a),o=n.getOptionsFromAttr(),r=o.triggerEvent||"click",s=o.remoteEvent||"click";n.on(r,function(){i.length>0&&i.trigger(s)})})}}(jQuery,MY_UTILS),function(e,t){e.fn.toggleToTopButton=function(n){$elem=e(this);var a={threshold:100,visibleClass:t.classes.open};n=e.extend({},a,n);function i(){t.$document.scrollTop()>100?$elem.is("."+n.visibleClass)||$elem.addClass(n.visibleClass):$elem.is("."+n.visibleClass)&&$elem.removeClass(n.visibleClass)}i(),t.$window.on("scroll resize",function(){i()})}}(jQuery,MY_UTILS),function(e,t){e.fn.toggle=function(){e(this).each(function(){var n=e(this),a=n.attr(t.attributes.target)||"",i=t.$targetElems.filter(a).lenght>0?t.$targetElems.filter(a):e(a),o=t.classes.open,r=t.classes.animating;i.getTransitionDuration();n.on("click",function(){i.length>0&&(i.is("."+o)?(i.removeClass(o),n.ariaExpanded("false")):(i.addClass(o),n.ariaExpanded("true")),i.setRemoveAnimationClass(r))})})}}(jQuery,MY_UTILS),function(e,t){t.$functionElems.filter('[data-fn="toggle"]').toggle(),t.$functionElems.filter('[data-fn="dropdown-multilevel"]').dropdownMultilevel(),t.$functionElems.filter('[data-fn="remote-event"]').remoteEvent(),e('a[href^="#"]:not([href="#"])').animatedAnchors({offset:function(){return t.anchorOffsetTop}}),t.$functionElems.filter('[data-fn="to-top-wrapper"]').toggleToTopButton(),t.$functionElems.filter('[data-fn="dib-election-tool"]').dibElection()}(jQuery,MY_UTILS);